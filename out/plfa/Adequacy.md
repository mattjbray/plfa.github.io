---
src       : "src/plfa/Adequacy.lagda.md"
title     : "Adequacy: of denotational semantics with respect to operational semantics"
layout    : page
prev      : /Soundness/
permalink : /Adequacy/
next      : /ContextualEquivalence/
---

{% raw %}<pre class="Agda"><a id="202" class="Keyword">module</a> <a id="209" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}" class="Module">plfa.Adequacy</a> <a id="223" class="Keyword">where</a>
</pre>{% endraw %}
## Introduction

Having proved a preservation property in the last chapter, a natural
next step would be to prove progress. That is, to prove a property
of the form

    If γ ⊢ M ↓ v, then either M is a lambda abstraction or M —→ N for some N.

Such a property would tell us that having a denotation implies either
reduction to normal form or divergence. This is indeed true, but we
can prove a much stronger property! In fact, having a denotation that
is a function value (not `⊥`) implies reduction to a lambda
abstraction (no divergence).

This stronger property, reformulated a bit, is known as _adequacy_.
That is, if a term `M` is denotationally equal to a lambda abstraction,
then `M` reduces to a lambda abstraction.

    ℰ M ≃ ℰ (ƛ N)  implies M —↠ ƛ N' for some N'

Recall that `ℰ M ≃ ℰ (ƛ N)` is equivalent to saying that
`γ ⊢ M ↓ (v ↦ w)` for some `v` and `w`. We will show that
`γ ⊢ M ↓ (v ↦ w)` implies reduction a lambda abstraction.

It is well known that a term can reduce to a lambda abstraction using
full β reduction if and only if it can reduce to a lambda abstraction
using the call-by-name reduction strategy. So we shall prove that
`γ ⊢ M ↓ (v ↦ w)` implies that `M` halts under call-by-name evaluation,
which we define with a big-step semantics written `γ' ⊢ M ⇓ c`, where
`c` is a closure (a term paired with an environment) and `γ'` is an
environment that maps variables to closures

So we will show that `γ ⊢ M ↓ (v ↦ w)` implies `γ' ⊢ M ⇓ c`,
provided `γ` and `γ'` are appropriate related.  The proof will
be an induction on the derivation of `γ ⊢ M ↓ v`, and to
strengthen the induction hypothesis, we will relate semantic values to
closures using a _logical relation_ `𝕍`.

The rest of this chapter is organized as follows.

* We loosen the requirement that `M` result in a function value and
  instead require that `M` result in a value that is greater than or
  equal to a function value. We establish several properties about
  being ``greater than a function''.

* We define the call-by-name big-step semantics of the lambda calculus
  and prove that it is deterministic.

* We define the logical relation `𝕍` that relates values and closures,
  and extend it to a relation on terms `𝔼` and environments `𝔾`.

* We prove the main lemma,
  that if `𝔾 γ γ'` and `γ ⊢ M ↓ v`, then `𝔼 v (clos M γ')`.

* We prove adequacy as a corollary to the main lemma.


## Imports

{% raw %}<pre class="Agda"><a id="2639" class="Keyword">open</a> <a id="2644" class="Keyword">import</a> <a id="2651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}" class="Module">plfa.Untyped</a>
  <a id="2666" class="Keyword">using</a> <a id="2672" class="Symbol">(</a><a id="2673" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2906" class="Datatype">Context</a><a id="2680" class="Symbol">;</a> <a id="2682" href="plfa.Untyped.html#4028" class="Datatype Operator">_⊢_</a><a id="2685" class="Symbol">;</a> <a id="2687" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="2688" class="Symbol">;</a> <a id="2690" href="plfa.Untyped.html#3259" class="Datatype Operator">_∋_</a><a id="2693" class="Symbol">;</a> <a id="2695" href="plfa.Untyped.html#2928" class="InductiveConstructor">∅</a><a id="2696" class="Symbol">;</a> <a id="2698" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">_,_</a><a id="2701" class="Symbol">;</a> <a id="2703" href="plfa.Untyped.html#3295" class="InductiveConstructor">Z</a><a id="2704" class="Symbol">;</a> <a id="2706" href="plfa.Untyped.html#3340" class="InductiveConstructor Operator">S_</a><a id="2708" class="Symbol">;</a> <a id="2710" href="plfa.Untyped.html#4064" class="InductiveConstructor Operator">`_</a><a id="2712" class="Symbol">;</a> <a id="2714" href="plfa.Untyped.html#4116" class="InductiveConstructor Operator">ƛ_</a><a id="2716" class="Symbol">;</a> <a id="2718" href="plfa.Untyped.html#4176" class="InductiveConstructor Operator">_·_</a><a id="2721" class="Symbol">;</a>
         <a id="2732" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#5969" class="Function">rename</a><a id="2738" class="Symbol">;</a> <a id="2740" href="plfa.Untyped.html#6697" class="Function">subst</a><a id="2745" class="Symbol">;</a> <a id="2747" href="plfa.Untyped.html#5659" class="Function">ext</a><a id="2750" class="Symbol">;</a> <a id="2752" href="plfa.Untyped.html#6405" class="Function">exts</a><a id="2756" class="Symbol">;</a> <a id="2758" href="plfa.Untyped.html#7225" class="Function Operator">_[_]</a><a id="2762" class="Symbol">;</a> <a id="2764" href="plfa.Untyped.html#7109" class="Function">subst-zero</a><a id="2774" class="Symbol">)</a>
<a id="2776" class="Keyword">open</a> <a id="2781" class="Keyword">import</a> <a id="2788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/LambdaReduction.md %}{% raw %}" class="Module">plfa.LambdaReduction</a>
  <a id="2811" class="Keyword">using</a> <a id="2817" class="Symbol">(</a><a id="2818" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/LambdaReduction.md %}{% raw %}#837" class="Datatype Operator">_—↠_</a><a id="2822" class="Symbol">;</a> <a id="2824" href="plfa.LambdaReduction.html#944" class="InductiveConstructor Operator">_—→⟨_⟩_</a><a id="2831" class="Symbol">;</a> <a id="2833" href="plfa.LambdaReduction.html#887" class="InductiveConstructor Operator">_[]</a><a id="2836" class="Symbol">;</a> <a id="2838" href="plfa.LambdaReduction.html#345" class="Datatype Operator">_—→_</a><a id="2842" class="Symbol">;</a> <a id="2844" href="plfa.LambdaReduction.html#395" class="InductiveConstructor">ξ₁</a><a id="2846" class="Symbol">;</a> <a id="2848" href="plfa.LambdaReduction.html#485" class="InductiveConstructor">ξ₂</a><a id="2850" class="Symbol">;</a> <a id="2852" href="plfa.LambdaReduction.html#575" class="InductiveConstructor">β</a><a id="2853" class="Symbol">;</a> <a id="2855" href="plfa.LambdaReduction.html#683" class="InductiveConstructor">ζ</a><a id="2856" class="Symbol">)</a>
<a id="2858" class="Keyword">open</a> <a id="2863" class="Keyword">import</a> <a id="2870" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}" class="Module">plfa.CallByName</a>
  <a id="2888" class="Keyword">using</a> <a id="2894" class="Symbol">(</a><a id="2895" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a><a id="2899" class="Symbol">;</a> <a id="2901" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a><a id="2905" class="Symbol">;</a> <a id="2907" href="plfa.CallByName.html#2558" class="Function">ClosEnv</a><a id="2914" class="Symbol">;</a> <a id="2916" href="plfa.CallByName.html#2771" class="Function">∅&#39;</a><a id="2918" class="Symbol">;</a> <a id="2920" href="plfa.CallByName.html#2793" class="Function Operator">_,&#39;_</a><a id="2924" class="Symbol">;</a> <a id="2926" href="plfa.CallByName.html#3142" class="Datatype Operator">_⊢_⇓_</a><a id="2931" class="Symbol">;</a> <a id="2933" href="plfa.CallByName.html#3199" class="InductiveConstructor">⇓-var</a><a id="2938" class="Symbol">;</a> <a id="2940" href="plfa.CallByName.html#3362" class="InductiveConstructor">⇓-lam</a><a id="2945" class="Symbol">;</a> <a id="2947" href="plfa.CallByName.html#3441" class="InductiveConstructor">⇓-app</a><a id="2952" class="Symbol">;</a> <a id="2954" href="plfa.CallByName.html#4555" class="Function">⇓-determ</a><a id="2962" class="Symbol">;</a>
         <a id="2973" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#11028" class="Function">cbn→reduce</a><a id="2983" class="Symbol">)</a>
<a id="2985" class="Keyword">open</a> <a id="2990" class="Keyword">import</a> <a id="2997" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}" class="Module">plfa.Denotational</a>
  <a id="3017" class="Keyword">using</a> <a id="3023" class="Symbol">(</a><a id="3024" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="3029" class="Symbol">;</a> <a id="3031" href="plfa.Denotational.html#7096" class="Function">Env</a><a id="3034" class="Symbol">;</a> <a id="3036" href="plfa.Denotational.html#7220" class="Function">`∅</a><a id="3038" class="Symbol">;</a> <a id="3040" href="plfa.Denotational.html#7253" class="Function Operator">_`,_</a><a id="3044" class="Symbol">;</a> <a id="3046" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">_↦_</a><a id="3049" class="Symbol">;</a> <a id="3051" href="plfa.Denotational.html#4313" class="Datatype Operator">_⊑_</a><a id="3054" class="Symbol">;</a> <a id="3056" href="plfa.Denotational.html#9270" class="Datatype Operator">_⊢_↓_</a><a id="3061" class="Symbol">;</a> <a id="3063" href="plfa.Denotational.html#3978" class="InductiveConstructor">⊥</a><a id="3064" class="Symbol">;</a> <a id="3066" href="plfa.Denotational.html#29350" class="Function">Funs∈</a><a id="3071" class="Symbol">;</a> <a id="3073" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">_⊔_</a><a id="3076" class="Symbol">;</a> <a id="3078" href="plfa.Denotational.html#27664" class="Function">∈→⊑</a><a id="3081" class="Symbol">;</a>
         <a id="3092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9324" class="InductiveConstructor">var</a><a id="3095" class="Symbol">;</a> <a id="3097" href="plfa.Denotational.html#9403" class="InductiveConstructor">↦-elim</a><a id="3103" class="Symbol">;</a> <a id="3105" href="plfa.Denotational.html#9541" class="InductiveConstructor">↦-intro</a><a id="3112" class="Symbol">;</a> <a id="3114" href="plfa.Denotational.html#9740" class="InductiveConstructor">⊔-intro</a><a id="3121" class="Symbol">;</a> <a id="3123" href="plfa.Denotational.html#9665" class="InductiveConstructor">⊥-intro</a><a id="3130" class="Symbol">;</a> <a id="3132" href="plfa.Denotational.html#9871" class="InductiveConstructor">sub</a><a id="3135" class="Symbol">;</a> <a id="3137" href="plfa.Denotational.html#17211" class="Function">ℰ</a><a id="3138" class="Symbol">;</a> <a id="3140" href="plfa.Denotational.html#17393" class="Function Operator">_≃_</a><a id="3143" class="Symbol">;</a> <a id="3145" href="plfa.Denotational.html#16732" class="Function Operator">_iff_</a><a id="3150" class="Symbol">;</a>
         <a id="3161" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4610" class="InductiveConstructor">Trans⊑</a><a id="3167" class="Symbol">;</a> <a id="3169" href="plfa.Denotational.html#4462" class="InductiveConstructor">ConjR1⊑</a><a id="3176" class="Symbol">;</a> <a id="3178" href="plfa.Denotational.html#4536" class="InductiveConstructor">ConjR2⊑</a><a id="3185" class="Symbol">;</a> <a id="3187" href="plfa.Denotational.html#4372" class="InductiveConstructor">ConjL⊑</a><a id="3193" class="Symbol">;</a> <a id="3195" href="plfa.Denotational.html#5467" class="Function">Refl⊑</a><a id="3200" class="Symbol">;</a> <a id="3202" href="plfa.Denotational.html#4684" class="InductiveConstructor">Fun⊑</a><a id="3206" class="Symbol">;</a> <a id="3208" href="plfa.Denotational.html#4348" class="InductiveConstructor">Bot⊑</a><a id="3212" class="Symbol">;</a> <a id="3214" href="plfa.Denotational.html#4798" class="InductiveConstructor">Dist⊑</a><a id="3219" class="Symbol">;</a>
         <a id="3230" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#39744" class="Function">sub-inv-fun</a><a id="3241" class="Symbol">)</a>
<a id="3243" class="Keyword">open</a> <a id="3248" class="Keyword">import</a> <a id="3255" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Soundness.md %}{% raw %}" class="Module">plfa.Soundness</a> <a id="3270" class="Keyword">using</a> <a id="3276" class="Symbol">(</a><a id="3277" href="plfa.Soundness.html#23421" class="Function">soundness</a><a id="3286" class="Symbol">)</a>
<a id="3288" class="Keyword">open</a> <a id="3293" class="Keyword">import</a> <a id="3300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Substitution.md %}{% raw %}" class="Module">plfa.Substitution</a> <a id="3318" class="Keyword">using</a> <a id="3324" class="Symbol">(</a><a id="3325" href="plfa.Substitution.html#3072" class="Function">ids</a><a id="3328" class="Symbol">;</a> <a id="3330" href="plfa.Substitution.html#17012" class="Function">sub-id</a><a id="3336" class="Symbol">)</a>

<a id="3339" class="Keyword">import</a> <a id="3346" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="3384" class="Symbol">as</a> <a id="3387" class="Module">Eq</a>
<a id="3390" class="Keyword">open</a> <a id="3395" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="3398" class="Keyword">using</a> <a id="3404" class="Symbol">(</a><a id="3405" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Equality.html#125" class="Datatype Operator">_≡_</a><a id="3408" class="Symbol">;</a> <a id="3410" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#799" class="Function Operator">_≢_</a><a id="3413" class="Symbol">;</a> <a id="3415" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="3419" class="Symbol">;</a> <a id="3421" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a><a id="3426" class="Symbol">;</a> <a id="3428" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="3431" class="Symbol">;</a> <a id="3433" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="3437" class="Symbol">;</a> <a id="3439" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1436" class="Function">cong₂</a><a id="3444" class="Symbol">;</a> <a id="3446" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.html#1308" class="Function">cong-app</a><a id="3454" class="Symbol">)</a>
<a id="3456" class="Keyword">open</a> <a id="3461" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2499" class="Module">Eq.≡-Reasoning</a> <a id="3476" class="Keyword">using</a> <a id="3482" class="Symbol">(</a><a id="3483" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin_</a><a id="3489" class="Symbol">;</a> <a id="3491" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">_≡⟨⟩_</a><a id="3496" class="Symbol">;</a> <a id="3498" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">_≡⟨_⟩_</a><a id="3504" class="Symbol">;</a> <a id="3506" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">_∎</a><a id="3508" class="Symbol">)</a>
<a id="3510" class="Keyword">open</a> <a id="3515" class="Keyword">import</a> <a id="3522" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html" class="Module">Data.Product</a> <a id="3535" class="Keyword">using</a> <a id="3541" class="Symbol">(</a><a id="3542" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">_×_</a><a id="3545" class="Symbol">;</a> <a id="3547" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#139" class="Record">Σ</a><a id="3548" class="Symbol">;</a> <a id="3550" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ-syntax</a><a id="3558" class="Symbol">;</a> <a id="3560" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1364" class="Function">∃</a><a id="3561" class="Symbol">;</a> <a id="3563" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1783" class="Function">∃-syntax</a><a id="3571" class="Symbol">;</a> <a id="3573" href="Agda.Builtin.Sigma.html#225" class="Field">proj₁</a><a id="3578" class="Symbol">;</a> <a id="3580" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a><a id="3585" class="Symbol">)</a>
  <a id="3589" class="Keyword">renaming</a> <a id="3598" class="Symbol">(</a><a id="3599" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a> <a id="3603" class="Symbol">to</a> <a id="3606" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨_,_⟩</a><a id="3611" class="Symbol">)</a>
<a id="3613" class="Keyword">open</a> <a id="3618" class="Keyword">import</a> <a id="3625" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.html" class="Module">Data.Sum</a>
<a id="3634" class="Keyword">open</a> <a id="3639" class="Keyword">import</a> <a id="3646" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="3663" class="Keyword">using</a> <a id="3669" class="Symbol">(</a><a id="3670" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬_</a><a id="3672" class="Symbol">)</a>
<a id="3674" class="Keyword">open</a> <a id="3679" class="Keyword">import</a> <a id="3686" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html" class="Module">Relation.Nullary.Negation</a> <a id="3712" class="Keyword">using</a> <a id="3718" class="Symbol">(</a><a id="3719" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a><a id="3732" class="Symbol">)</a>
<a id="3734" class="Keyword">open</a> <a id="3739" class="Keyword">import</a> <a id="3746" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html" class="Module">Data.Empty</a> <a id="3757" class="Keyword">using</a> <a id="3763" class="Symbol">(</a><a id="3764" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a><a id="3770" class="Symbol">)</a> <a id="3772" class="Keyword">renaming</a> <a id="3781" class="Symbol">(</a><a id="3782" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">⊥</a> <a id="3784" class="Symbol">to</a> <a id="3787" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">Bot</a><a id="3790" class="Symbol">)</a>
<a id="3792" class="Keyword">open</a> <a id="3797" class="Keyword">import</a> <a id="3804" href="https://agda.github.io/agda-stdlib/v1.1/Data.Unit.html" class="Module">Data.Unit</a>
<a id="3814" class="Keyword">open</a> <a id="3819" class="Keyword">import</a> <a id="3826" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="3843" class="Keyword">using</a> <a id="3849" class="Symbol">(</a><a id="3850" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a><a id="3853" class="Symbol">;</a> <a id="3855" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a><a id="3858" class="Symbol">;</a> <a id="3860" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a><a id="3862" class="Symbol">)</a>
<a id="3864" class="Keyword">open</a> <a id="3869" class="Keyword">import</a> <a id="3876" href="https://agda.github.io/agda-stdlib/v1.1/Function.html" class="Module">Function</a> <a id="3885" class="Keyword">using</a> <a id="3891" class="Symbol">(</a><a id="3892" href="https://agda.github.io/agda-stdlib/v1.1/Function.html#1099" class="Function Operator">_∘_</a><a id="3895" class="Symbol">)</a>
</pre>{% endraw %}

## The property of being greater or equal to a function

We define the following short-hand for saying that a value is
greather-than or equal to a function value.

{% raw %}<pre class="Agda"><a id="AboveFun"></a><a id="4071" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4080" class="Symbol">:</a> <a id="4082" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a> <a id="4088" class="Symbol">→</a> <a id="4090" class="PrimitiveType">Set</a>
<a id="4094" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4103" href="plfa.Adequacy.html#4103" class="Bound">u</a> <a id="4105" class="Symbol">=</a> <a id="4107" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="4110" href="plfa.Adequacy.html#4110" class="Bound">v</a> <a id="4112" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="4114" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a> <a id="4120" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="4122" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="4125" href="plfa.Adequacy.html#4125" class="Bound">w</a> <a id="4127" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="4129" href="plfa.Denotational.html#3958" class="Datatype">Value</a> <a id="4135" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="4137" href="plfa.Adequacy.html#4110" class="Bound">v</a> <a id="4139" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="4141" href="plfa.Adequacy.html#4125" class="Bound">w</a> <a id="4143" href="plfa.Denotational.html#4313" class="Datatype Operator">⊑</a> <a id="4145" href="plfa.Adequacy.html#4103" class="Bound">u</a>
</pre>{% endraw %}
If a value `u` is greater than a function, then an even greater value `u'`
is too.

{% raw %}<pre class="Agda"><a id="AboveFun-⊑"></a><a id="4240" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4240" class="Function">AboveFun-⊑</a> <a id="4251" class="Symbol">:</a> <a id="4253" class="Symbol">∀{</a><a id="4255" href="plfa.Adequacy.html#4255" class="Bound">u</a> <a id="4257" href="plfa.Adequacy.html#4257" class="Bound">u&#39;</a> <a id="4260" class="Symbol">:</a> <a id="4262" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="4267" class="Symbol">}</a>
      <a id="4275" class="Symbol">→</a> <a id="4277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4286" href="plfa.Adequacy.html#4255" class="Bound">u</a> <a id="4288" class="Symbol">→</a> <a id="4290" href="plfa.Adequacy.html#4255" class="Bound">u</a> <a id="4292" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4313" class="Datatype Operator">⊑</a> <a id="4294" href="plfa.Adequacy.html#4257" class="Bound">u&#39;</a>
        <a id="4305" class="Comment">-------------------</a>
      <a id="4331" class="Symbol">→</a> <a id="4333" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4342" href="plfa.Adequacy.html#4257" class="Bound">u&#39;</a>
<a id="4345" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4240" class="Function">AboveFun-⊑</a> <a id="4356" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4358" href="plfa.Adequacy.html#4358" class="Bound">v</a> <a id="4360" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4362" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4364" href="plfa.Adequacy.html#4364" class="Bound">w</a> <a id="4366" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4368" href="plfa.Adequacy.html#4368" class="Bound">lt&#39;</a> <a id="4372" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4374" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4376" href="plfa.Adequacy.html#4376" class="Bound">lt</a> <a id="4379" class="Symbol">=</a> <a id="4381" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4383" href="plfa.Adequacy.html#4358" class="Bound">v</a> <a id="4385" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4387" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4389" href="plfa.Adequacy.html#4364" class="Bound">w</a> <a id="4391" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4393" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4610" class="InductiveConstructor">Trans⊑</a> <a id="4400" href="plfa.Adequacy.html#4368" class="Bound">lt&#39;</a> <a id="4404" href="plfa.Adequacy.html#4376" class="Bound">lt</a> <a id="4407" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4409" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
The bottom value `⊥` is not greater than a function.

{% raw %}<pre class="Agda"><a id="AboveFun⊥"></a><a id="4474" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4474" class="Function">AboveFun⊥</a> <a id="4484" class="Symbol">:</a> <a id="4486" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="4488" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="4497" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3978" class="InductiveConstructor">⊥</a>
<a id="4499" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4474" class="Function">AboveFun⊥</a> <a id="4509" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4511" href="plfa.Adequacy.html#4511" class="Bound">v</a> <a id="4513" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4515" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4517" href="plfa.Adequacy.html#4517" class="Bound">w</a> <a id="4519" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4521" href="plfa.Adequacy.html#4521" class="Bound">lt</a> <a id="4524" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4526" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="4532" class="Keyword">with</a> <a id="4537" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#39744" class="Function">sub-inv-fun</a> <a id="4549" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4521" class="Bound">lt</a>
<a id="4552" class="Symbol">...</a> <a id="4556" class="Symbol">|</a> <a id="4558" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4560" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4560" class="Bound">Γ</a> <a id="4562" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4564" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4566" href="plfa.Adequacy.html#4566" class="Bound">f</a> <a id="4568" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4570" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4572" href="plfa.Adequacy.html#4572" class="Bound">Γ⊆⊥</a> <a id="4576" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4578" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4580" href="plfa.Adequacy.html#4580" class="Bound">lt1</a> <a id="4584" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4586" href="plfa.Adequacy.html#4586" class="Bound">lt2</a> <a id="4590" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4592" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4594" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4596" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="4602" class="Keyword">with</a> <a id="4607" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#29350" class="Function">Funs∈</a> <a id="4613" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4566" class="Bound">f</a>
<a id="4615" class="Symbol">...</a> <a id="4619" class="Symbol">|</a> <a id="4621" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4623" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4623" class="Bound">A</a> <a id="4625" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4627" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4629" href="plfa.Adequacy.html#4629" class="Bound">B</a> <a id="4631" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4633" href="plfa.Adequacy.html#4633" class="Bound">m</a> <a id="4635" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4637" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="4643" class="Keyword">with</a> <a id="4648" class="Bound">Γ⊆⊥</a> <a id="4652" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4633" class="Bound">m</a>
<a id="4654" class="Symbol">...</a> <a id="4658" class="Symbol">|</a> <a id="4660" class="Symbol">()</a>
</pre>{% endraw %}
If the join of two values `u` and `u'` is greater than a function, then
at least one of them is too.

{% raw %}<pre class="Agda"><a id="AboveFun-⊔"></a><a id="4774" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4774" class="Function">AboveFun-⊔</a> <a id="4785" class="Symbol">:</a> <a id="4787" class="Symbol">∀{</a><a id="4789" href="plfa.Adequacy.html#4789" class="Bound">u</a> <a id="4791" href="plfa.Adequacy.html#4791" class="Bound">u&#39;</a><a id="4793" class="Symbol">}</a>
           <a id="4806" class="Symbol">→</a> <a id="4808" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4817" class="Symbol">(</a><a id="4818" href="plfa.Adequacy.html#4789" class="Bound">u</a> <a id="4820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="4822" href="plfa.Adequacy.html#4791" class="Bound">u&#39;</a><a id="4824" class="Symbol">)</a>
           <a id="4837" class="Symbol">→</a> <a id="4839" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="4848" href="plfa.Adequacy.html#4789" class="Bound">u</a> <a id="4850" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#612" class="Datatype Operator">⊎</a> <a id="4852" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="4861" href="plfa.Adequacy.html#4791" class="Bound">u&#39;</a>
<a id="4864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4774" class="Function">AboveFun-⊔</a><a id="4874" class="Symbol">{</a><a id="4875" href="plfa.Adequacy.html#4875" class="Bound">u</a><a id="4876" class="Symbol">}{</a><a id="4878" href="plfa.Adequacy.html#4878" class="Bound">u&#39;</a><a id="4880" class="Symbol">}</a> <a id="4882" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4884" href="plfa.Adequacy.html#4884" class="Bound">v</a> <a id="4886" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4888" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4890" href="plfa.Adequacy.html#4890" class="Bound">w</a> <a id="4892" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4894" href="plfa.Adequacy.html#4894" class="Bound">v↦w⊑u⊔u&#39;</a> <a id="4903" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4905" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="4911" class="Keyword">with</a> <a id="4916" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#39744" class="Function">sub-inv-fun</a> <a id="4928" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4894" class="Bound">v↦w⊑u⊔u&#39;</a>
<a id="4937" class="Symbol">...</a> <a id="4941" class="Symbol">|</a> <a id="4943" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4945" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4945" class="Bound">Γ</a> <a id="4947" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4949" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4951" href="plfa.Adequacy.html#4951" class="Bound">f</a> <a id="4953" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4955" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4957" href="plfa.Adequacy.html#4957" class="Bound">Γ⊆u⊔u&#39;</a> <a id="4964" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4966" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="4968" href="plfa.Adequacy.html#4968" class="Bound">lt1</a> <a id="4972" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="4974" href="plfa.Adequacy.html#4974" class="Bound">lt2</a> <a id="4978" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4980" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4982" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="4984" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="4990" class="Keyword">with</a> <a id="4995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#29350" class="Function">Funs∈</a> <a id="5001" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4951" class="Bound">f</a>
<a id="5003" class="Symbol">...</a> <a id="5007" class="Symbol">|</a> <a id="5009" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5011" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5011" class="Bound">A</a> <a id="5013" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5015" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5017" href="plfa.Adequacy.html#5017" class="Bound">B</a> <a id="5019" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5021" href="plfa.Adequacy.html#5021" class="Bound">m</a> <a id="5023" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5025" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="5031" class="Keyword">with</a> <a id="5036" class="Bound">Γ⊆u⊔u&#39;</a> <a id="5043" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5021" class="Bound">m</a>
<a id="5045" class="Symbol">...</a> <a id="5049" class="Symbol">|</a> <a id="5051" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="5056" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5056" class="Bound">x</a> <a id="5058" class="Symbol">=</a> <a id="5060" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="5065" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5067" class="Bound">A</a> <a id="5069" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5071" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5073" class="Bound">B</a> <a id="5075" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5077" class="Symbol">(</a><a id="5078" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#27664" class="Function">∈→⊑</a> <a id="5082" href="plfa.Adequacy.html#5056" class="Bound">x</a><a id="5083" class="Symbol">)</a> <a id="5085" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5087" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="5089" class="Symbol">...</a> <a id="5093" class="Symbol">|</a> <a id="5095" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="5100" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5100" class="Bound">x</a> <a id="5102" class="Symbol">=</a> <a id="5104" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="5109" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5111" class="Bound">A</a> <a id="5113" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5115" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5117" class="Bound">B</a> <a id="5119" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5121" class="Symbol">(</a><a id="5122" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#27664" class="Function">∈→⊑</a> <a id="5126" href="plfa.Adequacy.html#5100" class="Bound">x</a><a id="5127" class="Symbol">)</a> <a id="5129" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5131" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
On the other hand, if neither of `u` and `u'` is greater than a function,
then their join is also not greater than a function.

{% raw %}<pre class="Agda"><a id="not-AboveFun-⊔"></a><a id="5270" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5270" class="Function">not-AboveFun-⊔</a> <a id="5285" class="Symbol">:</a> <a id="5287" class="Symbol">∀{</a><a id="5289" href="plfa.Adequacy.html#5289" class="Bound">u</a> <a id="5291" href="plfa.Adequacy.html#5291" class="Bound">u&#39;</a> <a id="5294" class="Symbol">:</a> <a id="5296" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="5301" class="Symbol">}</a>
               <a id="5318" class="Symbol">→</a> <a id="5320" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5322" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="5331" href="plfa.Adequacy.html#5289" class="Bound">u</a> <a id="5333" class="Symbol">→</a> <a id="5335" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5337" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5346" href="plfa.Adequacy.html#5291" class="Bound">u&#39;</a>
               <a id="5364" class="Symbol">→</a> <a id="5366" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="5377" class="Symbol">(</a><a id="5378" href="plfa.Adequacy.html#5289" class="Bound">u</a> <a id="5380" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="5382" href="plfa.Adequacy.html#5291" class="Bound">u&#39;</a><a id="5384" class="Symbol">)</a>
<a id="5386" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5270" class="Function">not-AboveFun-⊔</a> <a id="5401" href="plfa.Adequacy.html#5401" class="Bound">naf1</a> <a id="5406" href="plfa.Adequacy.html#5406" class="Bound">naf2</a> <a id="5411" href="plfa.Adequacy.html#5411" class="Bound">af12</a>
    <a id="5420" class="Keyword">with</a> <a id="5425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4774" class="Function">AboveFun-⊔</a> <a id="5436" href="plfa.Adequacy.html#5411" class="Bound">af12</a>
<a id="5441" class="Symbol">...</a> <a id="5445" class="Symbol">|</a> <a id="5447" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="5452" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5452" class="Bound">af1</a> <a id="5456" class="Symbol">=</a> <a id="5458" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="5472" href="plfa.Adequacy.html#5452" class="Bound">af1</a> <a id="5476" class="Bound">naf1</a>
<a id="5481" class="Symbol">...</a> <a id="5485" class="Symbol">|</a> <a id="5487" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="5492" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5492" class="Bound">af2</a> <a id="5496" class="Symbol">=</a> <a id="5498" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="5512" href="plfa.Adequacy.html#5492" class="Bound">af2</a> <a id="5516" class="Bound">naf2</a>
</pre>{% endraw %}
The converse is also true. If the join of two values is not above a
function, then neither of them is individually.

{% raw %}<pre class="Agda"><a id="not-AboveFun-⊔-inv"></a><a id="5647" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5647" class="Function">not-AboveFun-⊔-inv</a> <a id="5666" class="Symbol">:</a> <a id="5668" class="Symbol">∀{</a><a id="5670" href="plfa.Adequacy.html#5670" class="Bound">u</a> <a id="5672" href="plfa.Adequacy.html#5672" class="Bound">u&#39;</a> <a id="5675" class="Symbol">:</a> <a id="5677" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="5682" class="Symbol">}</a> <a id="5684" class="Symbol">→</a> <a id="5686" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5688" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5697" class="Symbol">(</a><a id="5698" href="plfa.Adequacy.html#5670" class="Bound">u</a> <a id="5700" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="5702" href="plfa.Adequacy.html#5672" class="Bound">u&#39;</a><a id="5704" class="Symbol">)</a>
              <a id="5720" class="Symbol">→</a> <a id="5722" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5724" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="5733" href="plfa.Adequacy.html#5670" class="Bound">u</a> <a id="5735" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a> <a id="5737" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5739" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5748" href="plfa.Adequacy.html#5672" class="Bound">u&#39;</a>
<a id="5751" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5647" class="Function">not-AboveFun-⊔-inv</a> <a id="5770" href="plfa.Adequacy.html#5770" class="Bound">af</a> <a id="5773" class="Symbol">=</a> <a id="5775" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5777" href="plfa.Adequacy.html#5803" class="Function">f</a> <a id="5779" href="plfa.Adequacy.html#5770" class="Bound">af</a> <a id="5782" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5784" href="plfa.Adequacy.html#5957" class="Function">g</a> <a id="5786" href="plfa.Adequacy.html#5770" class="Bound">af</a> <a id="5789" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
  <a id="5793" class="Keyword">where</a>
    <a id="5803" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5803" class="Function">f</a> <a id="5805" class="Symbol">:</a> <a id="5807" class="Symbol">∀{</a><a id="5809" href="plfa.Adequacy.html#5809" class="Bound">u</a> <a id="5811" href="plfa.Adequacy.html#5811" class="Bound">u&#39;</a> <a id="5814" class="Symbol">:</a> <a id="5816" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="5821" class="Symbol">}</a> <a id="5823" class="Symbol">→</a> <a id="5825" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5827" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5836" class="Symbol">(</a><a id="5837" href="plfa.Adequacy.html#5809" class="Bound">u</a> <a id="5839" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="5841" href="plfa.Adequacy.html#5811" class="Bound">u&#39;</a><a id="5843" class="Symbol">)</a> <a id="5845" class="Symbol">→</a> <a id="5847" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5849" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5858" href="plfa.Adequacy.html#5809" class="Bound">u</a>
    <a id="5864" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5803" class="Function">f</a><a id="5865" class="Symbol">{</a><a id="5866" href="plfa.Adequacy.html#5866" class="Bound">u</a><a id="5867" class="Symbol">}{</a><a id="5869" href="plfa.Adequacy.html#5869" class="Bound">u&#39;</a><a id="5871" class="Symbol">}</a> <a id="5873" href="plfa.Adequacy.html#5873" class="Bound">af12</a> <a id="5878" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5880" href="plfa.Adequacy.html#5880" class="Bound">v</a> <a id="5882" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5884" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5886" href="plfa.Adequacy.html#5886" class="Bound">w</a> <a id="5888" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5890" href="plfa.Adequacy.html#5890" class="Bound">lt</a> <a id="5893" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5895" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5897" class="Symbol">=</a>
        <a id="5907" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="5921" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5923" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5880" class="Bound">v</a> <a id="5925" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5927" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="5929" href="plfa.Adequacy.html#5886" class="Bound">w</a> <a id="5931" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="5933" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4462" class="InductiveConstructor">ConjR1⊑</a> <a id="5941" href="plfa.Adequacy.html#5890" class="Bound">lt</a> <a id="5944" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5946" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="5948" href="plfa.Adequacy.html#5873" class="Bound">af12</a>
    <a id="5957" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5957" class="Function">g</a> <a id="5959" class="Symbol">:</a> <a id="5961" class="Symbol">∀{</a><a id="5963" href="plfa.Adequacy.html#5963" class="Bound">u</a> <a id="5965" href="plfa.Adequacy.html#5965" class="Bound">u&#39;</a> <a id="5968" class="Symbol">:</a> <a id="5970" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="5975" class="Symbol">}</a> <a id="5977" class="Symbol">→</a> <a id="5979" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="5981" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="5990" class="Symbol">(</a><a id="5991" href="plfa.Adequacy.html#5963" class="Bound">u</a> <a id="5993" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="5995" href="plfa.Adequacy.html#5965" class="Bound">u&#39;</a><a id="5997" class="Symbol">)</a> <a id="5999" class="Symbol">→</a> <a id="6001" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="6003" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="6012" href="plfa.Adequacy.html#5965" class="Bound">u&#39;</a>
    <a id="6019" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5957" class="Function">g</a><a id="6020" class="Symbol">{</a><a id="6021" href="plfa.Adequacy.html#6021" class="Bound">u</a><a id="6022" class="Symbol">}{</a><a id="6024" href="plfa.Adequacy.html#6024" class="Bound">u&#39;</a><a id="6026" class="Symbol">}</a> <a id="6028" href="plfa.Adequacy.html#6028" class="Bound">af12</a> <a id="6033" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6035" href="plfa.Adequacy.html#6035" class="Bound">v</a> <a id="6037" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6039" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6041" href="plfa.Adequacy.html#6041" class="Bound">w</a> <a id="6043" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6045" href="plfa.Adequacy.html#6045" class="Bound">lt</a> <a id="6048" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6050" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6052" class="Symbol">=</a>
        <a id="6062" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="6076" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6078" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6035" class="Bound">v</a> <a id="6080" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6082" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6084" href="plfa.Adequacy.html#6041" class="Bound">w</a> <a id="6086" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6088" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4536" class="InductiveConstructor">ConjR2⊑</a> <a id="6096" href="plfa.Adequacy.html#6045" class="Bound">lt</a> <a id="6099" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6101" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6103" href="plfa.Adequacy.html#6028" class="Bound">af12</a>
</pre>{% endraw %}
The property of being greater than a function value is decidable, as
exhibited by the following function.

{% raw %}<pre class="Agda"><a id="AboveFun?"></a><a id="6224" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="6234" class="Symbol">:</a> <a id="6236" class="Symbol">(</a><a id="6237" href="plfa.Adequacy.html#6237" class="Bound">v</a> <a id="6239" class="Symbol">:</a> <a id="6241" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="6246" class="Symbol">)</a> <a id="6248" class="Symbol">→</a> <a id="6250" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#605" class="Datatype">Dec</a> <a id="6254" class="Symbol">(</a><a id="6255" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="6264" href="plfa.Adequacy.html#6237" class="Bound">v</a><a id="6265" class="Symbol">)</a>
<a id="6267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="6277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3978" class="InductiveConstructor">⊥</a> <a id="6279" class="Symbol">=</a> <a id="6281" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6284" href="plfa.Adequacy.html#4474" class="Function">AboveFun⊥</a>
<a id="6294" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="6304" class="Symbol">(</a><a id="6305" href="plfa.Adequacy.html#6305" class="Bound">v</a> <a id="6307" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="6309" href="plfa.Adequacy.html#6309" class="Bound">w</a><a id="6310" class="Symbol">)</a> <a id="6312" class="Symbol">=</a> <a id="6314" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6318" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6320" href="plfa.Adequacy.html#6305" class="Bound">v</a> <a id="6322" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6324" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6326" href="plfa.Adequacy.html#6309" class="Bound">w</a> <a id="6328" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6330" href="plfa.Denotational.html#5467" class="Function">Refl⊑</a> <a id="6336" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6338" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="6340" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="6350" class="Symbol">(</a><a id="6351" href="plfa.Adequacy.html#6351" class="Bound">u</a> <a id="6353" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="6355" href="plfa.Adequacy.html#6355" class="Bound">u&#39;</a><a id="6357" class="Symbol">)</a>
    <a id="6363" class="Keyword">with</a> <a id="6368" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="6378" href="plfa.Adequacy.html#6351" class="Bound">u</a> <a id="6380" class="Symbol">|</a> <a id="6382" href="plfa.Adequacy.html#6224" class="Function">AboveFun?</a> <a id="6392" href="plfa.Adequacy.html#6355" class="Bound">u&#39;</a>
<a id="6395" class="Symbol">...</a> <a id="6399" class="Symbol">|</a> <a id="6401" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6405" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6407" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6407" class="Bound">v</a> <a id="6409" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6411" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6413" href="plfa.Adequacy.html#6413" class="Bound">w</a> <a id="6415" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6417" href="plfa.Adequacy.html#6417" class="Bound">lt</a> <a id="6420" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6422" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6424" class="Symbol">|</a> <a id="6426" class="Symbol">_</a> <a id="6428" class="Symbol">=</a> <a id="6430" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6434" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6436" href="plfa.Adequacy.html#6407" class="Bound">v</a> <a id="6438" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6440" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6442" href="plfa.Adequacy.html#6413" class="Bound">w</a> <a id="6444" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6446" class="Symbol">(</a><a id="6447" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4462" class="InductiveConstructor">ConjR1⊑</a> <a id="6455" href="plfa.Adequacy.html#6417" class="Bound">lt</a><a id="6457" class="Symbol">)</a> <a id="6459" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6461" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="6463" class="Symbol">...</a> <a id="6467" class="Symbol">|</a> <a id="6469" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6472" class="Symbol">_</a> <a id="6474" class="Symbol">|</a> <a id="6476" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6480" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6482" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6482" class="Bound">v</a> <a id="6484" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6486" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6488" href="plfa.Adequacy.html#6488" class="Bound">w</a> <a id="6490" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6492" href="plfa.Adequacy.html#6492" class="Bound">lt</a> <a id="6495" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6497" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6499" class="Symbol">=</a> <a id="6501" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="6505" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6507" href="plfa.Adequacy.html#6482" class="Bound">v</a> <a id="6509" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6511" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="6513" href="plfa.Adequacy.html#6488" class="Bound">w</a> <a id="6515" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="6517" class="Symbol">(</a><a id="6518" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4536" class="InductiveConstructor">ConjR2⊑</a> <a id="6526" href="plfa.Adequacy.html#6492" class="Bound">lt</a><a id="6528" class="Symbol">)</a> <a id="6530" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="6532" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="6534" class="Symbol">...</a> <a id="6538" class="Symbol">|</a> <a id="6540" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6543" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6543" class="Bound">x</a> <a id="6545" class="Symbol">|</a> <a id="6547" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6550" href="plfa.Adequacy.html#6550" class="Bound">y</a> <a id="6552" class="Symbol">=</a> <a id="6554" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="6557" class="Symbol">(</a><a id="6558" href="plfa.Adequacy.html#5270" class="Function">not-AboveFun-⊔</a> <a id="6573" href="plfa.Adequacy.html#6543" class="Bound">x</a> <a id="6575" href="plfa.Adequacy.html#6550" class="Bound">y</a><a id="6576" class="Symbol">)</a>
</pre>{% endraw %}

## Relating values to closures

Next we relate semantic values to closures.  The relation `𝕍` is for
closures whose term is a lambda abstraction, i.e., in weak-head normal
form (WHNF). The relation 𝔼 is for any closure. Roughly speaking,
`𝔼 v c` will hold if, when `v` is greater than a function value, `c` evaluates
to a closure `c'` in WHNF and `𝕍 v c'`. Regarding `𝕍 v c`, it will hold when
`c` is in WHNF, and if `v` is a function, the body of `c` evaluates
according to `v`.

{% raw %}<pre class="Agda"><a id="𝕍"></a><a id="7069" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7071" class="Symbol">:</a> <a id="7073" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a> <a id="7079" class="Symbol">→</a> <a id="7081" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a> <a id="7086" class="Symbol">→</a> <a id="7088" class="PrimitiveType">Set</a>
<a id="𝔼"></a><a id="7092" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7092" class="Function">𝔼</a> <a id="7094" class="Symbol">:</a> <a id="7096" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a> <a id="7102" class="Symbol">→</a> <a id="7104" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a> <a id="7109" class="Symbol">→</a> <a id="7111" class="PrimitiveType">Set</a>
</pre>{% endraw %}
We define `𝕍` as a function from values and closures to `Set` and not as a
data type because it is mutually recursive with `𝔼` in a negative
position (to the left of an implication).  We first perform case
analysis on the term in the closure. If the term is a variable or
application, then `𝕍` is false (`Bot`). If the term is a lambda
abstraction, we define `𝕍` by recursion on the value, which we
describe below.

{% raw %}<pre class="Agda"><a id="7540" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7542" href="plfa.Adequacy.html#7542" class="Bound">v</a> <a id="7544" class="Symbol">(</a><a id="7545" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="7550" class="Symbol">(</a><a id="7551" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4064" class="InductiveConstructor Operator">`</a> <a id="7553" href="plfa.Adequacy.html#7553" class="Bound">x₁</a><a id="7555" class="Symbol">)</a> <a id="7557" href="plfa.Adequacy.html#7557" class="Bound">γ</a><a id="7558" class="Symbol">)</a> <a id="7560" class="Symbol">=</a> <a id="7562" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">Bot</a>
<a id="7566" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7568" href="plfa.Adequacy.html#7568" class="Bound">v</a> <a id="7570" class="Symbol">(</a><a id="7571" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="7576" class="Symbol">(</a><a id="7577" href="plfa.Adequacy.html#7577" class="Bound">M</a> <a id="7579" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4176" class="InductiveConstructor Operator">·</a> <a id="7581" href="plfa.Adequacy.html#7581" class="Bound">M₁</a><a id="7583" class="Symbol">)</a> <a id="7585" href="plfa.Adequacy.html#7585" class="Bound">γ</a><a id="7586" class="Symbol">)</a> <a id="7588" class="Symbol">=</a> <a id="7590" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#279" class="Datatype">Bot</a>
<a id="7594" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7596" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3978" class="InductiveConstructor">⊥</a> <a id="7598" class="Symbol">(</a><a id="7599" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="7604" class="Symbol">(</a><a id="7605" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="7607" href="plfa.Adequacy.html#7607" class="Bound">M</a><a id="7608" class="Symbol">)</a> <a id="7610" href="plfa.Adequacy.html#7610" class="Bound">γ</a><a id="7611" class="Symbol">)</a> <a id="7613" class="Symbol">=</a> <a id="7615" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Unit.html#137" class="Record">⊤</a>
<a id="7617" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7619" class="Symbol">(</a><a id="7620" href="plfa.Adequacy.html#7620" class="Bound">v</a> <a id="7622" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="7624" href="plfa.Adequacy.html#7624" class="Bound">w</a><a id="7625" class="Symbol">)</a> <a id="7627" class="Symbol">(</a><a id="7628" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="7633" class="Symbol">(</a><a id="7634" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="7636" href="plfa.Adequacy.html#7636" class="Bound">N</a><a id="7637" class="Symbol">)</a> <a id="7639" href="plfa.Adequacy.html#7639" class="Bound">γ</a><a id="7640" class="Symbol">)</a> <a id="7642" class="Symbol">=</a>
    <a id="7648" class="Symbol">(∀{</a><a id="7651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7651" class="Bound">c</a> <a id="7653" class="Symbol">:</a> <a id="7655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a><a id="7659" class="Symbol">}</a> <a id="7661" class="Symbol">→</a> <a id="7663" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="7665" href="plfa.Adequacy.html#7620" class="Bound">v</a> <a id="7667" href="plfa.Adequacy.html#7651" class="Bound">c</a> <a id="7669" class="Symbol">→</a> <a id="7671" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="7680" href="plfa.Adequacy.html#7624" class="Bound">w</a> <a id="7682" class="Symbol">→</a> <a id="7684" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="7687" href="plfa.Adequacy.html#7687" class="Bound">c&#39;</a> <a id="7690" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="7692" href="plfa.CallByName.html#2588" class="Datatype">Clos</a> <a id="7697" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a>
        <a id="7707" class="Symbol">(</a><a id="7708" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7639" class="Bound">γ</a> <a id="7710" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2793" class="Function Operator">,&#39;</a> <a id="7713" href="plfa.Adequacy.html#7651" class="Bound">c</a><a id="7714" class="Symbol">)</a> <a id="7716" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="7718" href="plfa.Adequacy.html#7636" class="Bound">N</a> <a id="7720" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="7722" href="plfa.Adequacy.html#7687" class="Bound">c&#39;</a>  <a id="7726" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a>  <a id="7729" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="7731" href="plfa.Adequacy.html#7624" class="Bound">w</a> <a id="7733" href="plfa.Adequacy.html#7687" class="Bound">c&#39;</a><a id="7735" class="Symbol">)</a>
<a id="7737" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="7739" class="Symbol">(</a><a id="7740" href="plfa.Adequacy.html#7740" class="Bound">u</a> <a id="7742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="7744" href="plfa.Adequacy.html#7744" class="Bound">v</a><a id="7745" class="Symbol">)</a> <a id="7747" class="Symbol">(</a><a id="7748" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="7753" class="Symbol">(</a><a id="7754" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="7756" href="plfa.Adequacy.html#7756" class="Bound">N</a><a id="7757" class="Symbol">)</a> <a id="7759" href="plfa.Adequacy.html#7759" class="Bound">γ</a><a id="7760" class="Symbol">)</a> <a id="7762" class="Symbol">=</a> <a id="7764" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="7766" href="plfa.Adequacy.html#7740" class="Bound">u</a> <a id="7768" class="Symbol">(</a><a id="7769" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a> <a id="7774" class="Symbol">(</a><a id="7775" href="plfa.Untyped.html#4116" class="InductiveConstructor Operator">ƛ</a> <a id="7777" href="plfa.Adequacy.html#7756" class="Bound">N</a><a id="7778" class="Symbol">)</a> <a id="7780" href="plfa.Adequacy.html#7759" class="Bound">γ</a><a id="7781" class="Symbol">)</a> <a id="7783" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a> <a id="7785" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="7787" href="plfa.Adequacy.html#7744" class="Bound">v</a> <a id="7789" class="Symbol">(</a><a id="7790" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a> <a id="7795" class="Symbol">(</a><a id="7796" href="plfa.Untyped.html#4116" class="InductiveConstructor Operator">ƛ</a> <a id="7798" href="plfa.Adequacy.html#7756" class="Bound">N</a><a id="7799" class="Symbol">)</a> <a id="7801" href="plfa.Adequacy.html#7759" class="Bound">γ</a><a id="7802" class="Symbol">)</a>
</pre>{% endraw %}
* If the value is `⊥`, then the result is true (`⊤`).

* If the value is a join (u ⊔ v), then the result is the pair
  (conjunction) of 𝕍 is true for both u and v.

* The important case is for a function value `v ↦ w` and closure
  `clos (ƛ N) γ`. Given any closure `c` such that `𝔼 v c`, if `w` is
  greater than a function, then `N` evaluates (with `γ` extended with `c`)
  to some closure `c'` and we have `𝕍 w c'`.


The definition of `𝔼` is straightforward. If `v` is a greater than a
function, then `M` evaluates to a closure related to `v`.

{% raw %}<pre class="Agda"><a id="8362" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7092" class="Function">𝔼</a> <a id="8364" href="plfa.Adequacy.html#8364" class="Bound">v</a> <a id="8366" class="Symbol">(</a><a id="8367" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="8372" href="plfa.Adequacy.html#8372" class="Bound">M</a> <a id="8374" href="plfa.Adequacy.html#8374" class="Bound">γ&#39;</a><a id="8376" class="Symbol">)</a> <a id="8378" class="Symbol">=</a> <a id="8380" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="8389" href="plfa.Adequacy.html#8364" class="Bound">v</a> <a id="8391" class="Symbol">→</a> <a id="8393" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="8396" href="plfa.Adequacy.html#8396" class="Bound">c</a> <a id="8398" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="8400" href="plfa.CallByName.html#2588" class="Datatype">Clos</a> <a id="8405" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="8407" href="plfa.Adequacy.html#8374" class="Bound">γ&#39;</a> <a id="8410" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="8412" href="plfa.Adequacy.html#8372" class="Bound">M</a> <a id="8414" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="8416" href="plfa.Adequacy.html#8396" class="Bound">c</a> <a id="8418" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a> <a id="8420" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="8422" href="plfa.Adequacy.html#8364" class="Bound">v</a> <a id="8424" href="plfa.Adequacy.html#8396" class="Bound">c</a>
</pre>{% endraw %}
The proof of the main lemma is by induction on `γ ⊢ M ↓ v`, so it goes
underneath lambda abstractions and must therefore reason about open
terms (terms with variables). So we must relate environments of
semantic values to environments of closures.  In the following, `𝔾`
relates `γ` to `γ'` if the corresponding values and closures are related
by `𝔼`.

{% raw %}<pre class="Agda"><a id="𝔾"></a><a id="8788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8788" class="Function">𝔾</a> <a id="8790" class="Symbol">:</a> <a id="8792" class="Symbol">∀{</a><a id="8794" href="plfa.Adequacy.html#8794" class="Bound">Γ</a><a id="8795" class="Symbol">}</a> <a id="8797" class="Symbol">→</a> <a id="8799" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7096" class="Function">Env</a> <a id="8803" href="plfa.Adequacy.html#8794" class="Bound">Γ</a> <a id="8805" class="Symbol">→</a> <a id="8807" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="8815" href="plfa.Adequacy.html#8794" class="Bound">Γ</a> <a id="8817" class="Symbol">→</a> <a id="8819" class="PrimitiveType">Set</a>
<a id="8823" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8788" class="Function">𝔾</a> <a id="8825" class="Symbol">{</a><a id="8826" href="plfa.Adequacy.html#8826" class="Bound">Γ</a><a id="8827" class="Symbol">}</a> <a id="8829" href="plfa.Adequacy.html#8829" class="Bound">γ</a> <a id="8831" href="plfa.Adequacy.html#8831" class="Bound">γ&#39;</a> <a id="8834" class="Symbol">=</a> <a id="8836" class="Symbol">∀{</a><a id="8838" href="plfa.Adequacy.html#8838" class="Bound">x</a> <a id="8840" class="Symbol">:</a> <a id="8842" href="plfa.Adequacy.html#8826" class="Bound">Γ</a> <a id="8844" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#3259" class="Datatype Operator">∋</a> <a id="8846" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="8847" class="Symbol">}</a> <a id="8849" class="Symbol">→</a> <a id="8851" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="8853" class="Symbol">(</a><a id="8854" href="plfa.Adequacy.html#8829" class="Bound">γ</a> <a id="8856" href="plfa.Adequacy.html#8838" class="Bound">x</a><a id="8857" class="Symbol">)</a> <a id="8859" class="Symbol">(</a><a id="8860" href="plfa.Adequacy.html#8831" class="Bound">γ&#39;</a> <a id="8863" href="plfa.Adequacy.html#8838" class="Bound">x</a><a id="8864" class="Symbol">)</a>

<a id="𝔾-∅"></a><a id="8867" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8867" class="Function">𝔾-∅</a> <a id="8871" class="Symbol">:</a> <a id="8873" href="plfa.Adequacy.html#8788" class="Function">𝔾</a> <a id="8875" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7220" class="Function">`∅</a> <a id="8878" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2771" class="Function">∅&#39;</a>
<a id="8881" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8867" class="Function">𝔾-∅</a> <a id="8885" class="Symbol">{()}</a>

<a id="𝔾-ext"></a><a id="8891" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8891" class="Function">𝔾-ext</a> <a id="8897" class="Symbol">:</a> <a id="8899" class="Symbol">∀{</a><a id="8901" href="plfa.Adequacy.html#8901" class="Bound">Γ</a><a id="8902" class="Symbol">}{</a><a id="8904" href="plfa.Adequacy.html#8904" class="Bound">γ</a> <a id="8906" class="Symbol">:</a> <a id="8908" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7096" class="Function">Env</a> <a id="8912" href="plfa.Adequacy.html#8901" class="Bound">Γ</a><a id="8913" class="Symbol">}{</a><a id="8915" href="plfa.Adequacy.html#8915" class="Bound">γ&#39;</a> <a id="8918" class="Symbol">:</a> <a id="8920" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="8928" href="plfa.Adequacy.html#8901" class="Bound">Γ</a><a id="8929" class="Symbol">}{</a><a id="8931" href="plfa.Adequacy.html#8931" class="Bound">v</a> <a id="8933" href="plfa.Adequacy.html#8933" class="Bound">c</a><a id="8934" class="Symbol">}</a>
      <a id="8942" class="Symbol">→</a> <a id="8944" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8788" class="Function">𝔾</a> <a id="8946" href="plfa.Adequacy.html#8904" class="Bound">γ</a> <a id="8948" href="plfa.Adequacy.html#8915" class="Bound">γ&#39;</a> <a id="8951" class="Symbol">→</a> <a id="8953" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="8955" href="plfa.Adequacy.html#8931" class="Bound">v</a> <a id="8957" href="plfa.Adequacy.html#8933" class="Bound">c</a> <a id="8959" class="Symbol">→</a> <a id="8961" href="plfa.Adequacy.html#8788" class="Function">𝔾</a> <a id="8963" class="Symbol">(</a><a id="8964" href="plfa.Adequacy.html#8904" class="Bound">γ</a> <a id="8966" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7253" class="Function Operator">`,</a> <a id="8969" href="plfa.Adequacy.html#8931" class="Bound">v</a><a id="8970" class="Symbol">)</a> <a id="8972" class="Symbol">(</a><a id="8973" href="plfa.Adequacy.html#8915" class="Bound">γ&#39;</a> <a id="8976" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2793" class="Function Operator">,&#39;</a> <a id="8979" href="plfa.Adequacy.html#8933" class="Bound">c</a><a id="8980" class="Symbol">)</a>
<a id="8982" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8891" class="Function">𝔾-ext</a> <a id="8988" class="Symbol">{</a><a id="8989" href="plfa.Adequacy.html#8989" class="Bound">Γ</a><a id="8990" class="Symbol">}</a> <a id="8992" class="Symbol">{</a><a id="8993" href="plfa.Adequacy.html#8993" class="Bound">γ</a><a id="8994" class="Symbol">}</a> <a id="8996" class="Symbol">{</a><a id="8997" href="plfa.Adequacy.html#8997" class="Bound">γ&#39;</a><a id="8999" class="Symbol">}</a> <a id="9001" href="plfa.Adequacy.html#9001" class="Bound">g</a> <a id="9003" href="plfa.Adequacy.html#9003" class="Bound">e</a> <a id="9005" class="Symbol">{</a><a id="9006" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#3295" class="InductiveConstructor">Z</a><a id="9007" class="Symbol">}</a> <a id="9009" class="Symbol">=</a> <a id="9011" href="plfa.Adequacy.html#9003" class="Bound">e</a>
<a id="9013" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8891" class="Function">𝔾-ext</a> <a id="9019" class="Symbol">{</a><a id="9020" href="plfa.Adequacy.html#9020" class="Bound">Γ</a><a id="9021" class="Symbol">}</a> <a id="9023" class="Symbol">{</a><a id="9024" href="plfa.Adequacy.html#9024" class="Bound">γ</a><a id="9025" class="Symbol">}</a> <a id="9027" class="Symbol">{</a><a id="9028" href="plfa.Adequacy.html#9028" class="Bound">γ&#39;</a><a id="9030" class="Symbol">}</a> <a id="9032" href="plfa.Adequacy.html#9032" class="Bound">g</a> <a id="9034" href="plfa.Adequacy.html#9034" class="Bound">e</a> <a id="9036" class="Symbol">{</a><a id="9037" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#3340" class="InductiveConstructor Operator">S</a> <a id="9039" href="plfa.Adequacy.html#9039" class="Bound">x</a><a id="9040" class="Symbol">}</a> <a id="9042" class="Symbol">=</a> <a id="9044" href="plfa.Adequacy.html#9032" class="Bound">g</a>
</pre>{% endraw %}

We need a few properties of the `𝕍` and `𝔼` relations.  The first is that
a closure in the `𝕍` relation must be in weak-head normal form.  We
define WHNF has follows.

{% raw %}<pre class="Agda"><a id="9224" class="Keyword">data</a> <a id="WHNF"></a><a id="9229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9229" class="Datatype">WHNF</a> <a id="9234" class="Symbol">:</a> <a id="9236" class="Symbol">∀</a> <a id="9238" class="Symbol">{</a><a id="9239" href="plfa.Adequacy.html#9239" class="Bound">Γ</a> <a id="9241" href="plfa.Adequacy.html#9241" class="Bound">A</a><a id="9242" class="Symbol">}</a> <a id="9244" class="Symbol">→</a> <a id="9246" href="plfa.Adequacy.html#9239" class="Bound">Γ</a> <a id="9248" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4028" class="Datatype Operator">⊢</a> <a id="9250" href="plfa.Adequacy.html#9241" class="Bound">A</a> <a id="9252" class="Symbol">→</a> <a id="9254" class="PrimitiveType">Set</a> <a id="9258" class="Keyword">where</a>
  <a id="WHNF.ƛ_"></a><a id="9266" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="9269" class="Symbol">:</a> <a id="9271" class="Symbol">∀</a> <a id="9273" class="Symbol">{</a><a id="9274" href="plfa.Adequacy.html#9274" class="Bound">Γ</a><a id="9275" class="Symbol">}</a> <a id="9277" class="Symbol">{</a><a id="9278" href="plfa.Adequacy.html#9278" class="Bound">N</a> <a id="9280" class="Symbol">:</a> <a id="9282" href="plfa.Adequacy.html#9274" class="Bound">Γ</a> <a id="9284" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2944" class="InductiveConstructor Operator">,</a> <a id="9286" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="9288" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="9290" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="9291" class="Symbol">}</a>
     <a id="9298" class="Symbol">→</a> <a id="9300" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9229" class="Datatype">WHNF</a> <a id="9305" class="Symbol">(</a><a id="9306" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="9308" href="plfa.Adequacy.html#9278" class="Bound">N</a><a id="9309" class="Symbol">)</a>
</pre>{% endraw %}
The proof goes by cases on the term in the closure.

{% raw %}<pre class="Agda"><a id="𝕍→WHNF"></a><a id="9373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="9380" class="Symbol">:</a> <a id="9382" class="Symbol">∀{</a><a id="9384" href="plfa.Adequacy.html#9384" class="Bound">Γ</a><a id="9385" class="Symbol">}{</a><a id="9387" href="plfa.Adequacy.html#9387" class="Bound">γ</a> <a id="9389" class="Symbol">:</a> <a id="9391" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="9399" href="plfa.Adequacy.html#9384" class="Bound">Γ</a><a id="9400" class="Symbol">}{</a><a id="9402" href="plfa.Adequacy.html#9402" class="Bound">M</a> <a id="9404" class="Symbol">:</a> <a id="9406" href="plfa.Adequacy.html#9384" class="Bound">Γ</a> <a id="9408" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4028" class="Datatype Operator">⊢</a> <a id="9410" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="9411" class="Symbol">}{</a><a id="9413" href="plfa.Adequacy.html#9413" class="Bound">v</a><a id="9414" class="Symbol">}</a>
       <a id="9423" class="Symbol">→</a> <a id="9425" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="9427" href="plfa.Adequacy.html#9413" class="Bound">v</a> <a id="9429" class="Symbol">(</a><a id="9430" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="9435" href="plfa.Adequacy.html#9402" class="Bound">M</a> <a id="9437" href="plfa.Adequacy.html#9387" class="Bound">γ</a><a id="9438" class="Symbol">)</a> <a id="9440" class="Symbol">→</a> <a id="9442" href="plfa.Adequacy.html#9229" class="Datatype">WHNF</a> <a id="9447" href="plfa.Adequacy.html#9402" class="Bound">M</a>
<a id="9449" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="9456" class="Symbol">{</a><a id="9457" class="Argument">M</a> <a id="9459" class="Symbol">=</a> <a id="9461" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4064" class="InductiveConstructor Operator">`</a> <a id="9463" href="plfa.Adequacy.html#9463" class="Bound">x</a><a id="9464" class="Symbol">}</a> <a id="9466" class="Symbol">{</a><a id="9467" href="plfa.Adequacy.html#9467" class="Bound">v</a><a id="9468" class="Symbol">}</a> <a id="9470" class="Symbol">()</a>
<a id="9473" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="9480" class="Symbol">{</a><a id="9481" class="Argument">M</a> <a id="9483" class="Symbol">=</a> <a id="9485" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="9487" href="plfa.Adequacy.html#9487" class="Bound">N</a><a id="9488" class="Symbol">}</a> <a id="9490" class="Symbol">{</a><a id="9491" href="plfa.Adequacy.html#9491" class="Bound">v</a><a id="9492" class="Symbol">}</a> <a id="9494" href="plfa.Adequacy.html#9494" class="Bound">vc</a> <a id="9497" class="Symbol">=</a> <a id="9499" href="plfa.Adequacy.html#9266" class="InductiveConstructor Operator">ƛ_</a>
<a id="9502" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="9509" class="Symbol">{</a><a id="9510" class="Argument">M</a> <a id="9512" class="Symbol">=</a> <a id="9514" href="plfa.Adequacy.html#9514" class="Bound">L</a> <a id="9516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4176" class="InductiveConstructor Operator">·</a> <a id="9518" href="plfa.Adequacy.html#9518" class="Bound">M</a><a id="9519" class="Symbol">}</a> <a id="9521" class="Symbol">{</a><a id="9522" href="plfa.Adequacy.html#9522" class="Bound">v</a><a id="9523" class="Symbol">}</a> <a id="9525" class="Symbol">()</a>
</pre>{% endraw %}
Next we have an introduction rule for `𝕍` that mimics the `⊔-intro`
rule. If both `u` and `v` are related to a closure `c`, then their join is
too.

{% raw %}<pre class="Agda"><a id="𝕍⊔-intro"></a><a id="9686" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9686" class="Function">𝕍⊔-intro</a> <a id="9695" class="Symbol">:</a> <a id="9697" class="Symbol">∀{</a><a id="9699" href="plfa.Adequacy.html#9699" class="Bound">c</a> <a id="9701" href="plfa.Adequacy.html#9701" class="Bound">u</a> <a id="9703" href="plfa.Adequacy.html#9703" class="Bound">v</a><a id="9704" class="Symbol">}</a>
         <a id="9715" class="Symbol">→</a> <a id="9717" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="9719" href="plfa.Adequacy.html#9701" class="Bound">u</a> <a id="9721" href="plfa.Adequacy.html#9699" class="Bound">c</a> <a id="9723" class="Symbol">→</a> <a id="9725" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="9727" href="plfa.Adequacy.html#9703" class="Bound">v</a> <a id="9729" href="plfa.Adequacy.html#9699" class="Bound">c</a>
           <a id="9742" class="Comment">---------------</a>
         <a id="9767" class="Symbol">→</a> <a id="9769" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="9771" class="Symbol">(</a><a id="9772" href="plfa.Adequacy.html#9701" class="Bound">u</a> <a id="9774" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="9776" href="plfa.Adequacy.html#9703" class="Bound">v</a><a id="9777" class="Symbol">)</a> <a id="9779" href="plfa.Adequacy.html#9699" class="Bound">c</a>
<a id="9781" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9686" class="Function">𝕍⊔-intro</a> <a id="9790" class="Symbol">{</a><a id="9791" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="9796" class="Symbol">(</a><a id="9797" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4064" class="InductiveConstructor Operator">`</a> <a id="9799" href="plfa.Adequacy.html#9799" class="Bound">x</a><a id="9800" class="Symbol">)</a> <a id="9802" href="plfa.Adequacy.html#9802" class="Bound">γ</a><a id="9803" class="Symbol">}</a> <a id="9805" class="Symbol">()</a> <a id="9808" href="plfa.Adequacy.html#9808" class="Bound">vc</a>
<a id="9811" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9686" class="Function">𝕍⊔-intro</a> <a id="9820" class="Symbol">{</a><a id="9821" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="9826" class="Symbol">(</a><a id="9827" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="9829" href="plfa.Adequacy.html#9829" class="Bound">N</a><a id="9830" class="Symbol">)</a> <a id="9832" href="plfa.Adequacy.html#9832" class="Bound">γ</a><a id="9833" class="Symbol">}</a> <a id="9835" href="plfa.Adequacy.html#9835" class="Bound">uc</a> <a id="9838" href="plfa.Adequacy.html#9838" class="Bound">vc</a> <a id="9841" class="Symbol">=</a> <a id="9843" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="9845" href="plfa.Adequacy.html#9835" class="Bound">uc</a> <a id="9848" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="9850" href="plfa.Adequacy.html#9838" class="Bound">vc</a> <a id="9853" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="9855" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9686" class="Function">𝕍⊔-intro</a> <a id="9864" class="Symbol">{</a><a id="9865" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="9870" class="Symbol">(</a><a id="9871" href="plfa.Adequacy.html#9871" class="Bound">L</a> <a id="9873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4176" class="InductiveConstructor Operator">·</a> <a id="9875" href="plfa.Adequacy.html#9875" class="Bound">M</a><a id="9876" class="Symbol">)</a> <a id="9878" href="plfa.Adequacy.html#9878" class="Bound">γ</a><a id="9879" class="Symbol">}</a> <a id="9881" class="Symbol">()</a> <a id="9884" href="plfa.Adequacy.html#9884" class="Bound">vc</a>
</pre>{% endraw %}
In a moment we prove that `𝕍` is preserved when going from a greater
value to a lesser value: if `𝕍 v c` and `v' ⊑ v`, then `𝕍 v' c`.
This property, named `𝕍-sub`, is needed by the main lemma in
the case for the `sub` rule.

To prove `𝕍-sub`, we in turn need the following property concerning
values that are not greater than a function, that is, values that are
equivalent to `⊥`. In such cases, `𝕍 v (clos (ƛ N) γ')` is trivially true.

{% raw %}<pre class="Agda"><a id="not-AboveFun-𝕍"></a><a id="10335" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10335" class="Function">not-AboveFun-𝕍</a> <a id="10350" class="Symbol">:</a> <a id="10352" class="Symbol">∀{</a><a id="10354" href="plfa.Adequacy.html#10354" class="Bound">v</a> <a id="10356" class="Symbol">:</a> <a id="10358" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3958" class="Datatype">Value</a><a id="10363" class="Symbol">}{</a><a id="10365" href="plfa.Adequacy.html#10365" class="Bound">Γ</a><a id="10366" class="Symbol">}{</a><a id="10368" href="plfa.Adequacy.html#10368" class="Bound">γ&#39;</a> <a id="10371" class="Symbol">:</a> <a id="10373" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="10381" href="plfa.Adequacy.html#10365" class="Bound">Γ</a><a id="10382" class="Symbol">}{</a><a id="10384" href="plfa.Adequacy.html#10384" class="Bound">N</a> <a id="10386" class="Symbol">:</a> <a id="10388" href="plfa.Adequacy.html#10365" class="Bound">Γ</a> <a id="10390" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2944" class="InductiveConstructor Operator">,</a> <a id="10392" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="10394" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="10396" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="10398" class="Symbol">}</a>
    <a id="10404" class="Symbol">→</a> <a id="10406" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#535" class="Function Operator">¬</a> <a id="10408" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4071" class="Function">AboveFun</a> <a id="10417" href="plfa.Adequacy.html#10354" class="Bound">v</a>
      <a id="10425" class="Comment">-------------------</a>
    <a id="10449" class="Symbol">→</a> <a id="10451" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#7069" class="Function">𝕍</a> <a id="10453" href="plfa.Adequacy.html#10354" class="Bound">v</a> <a id="10455" class="Symbol">(</a><a id="10456" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="10461" class="Symbol">(</a><a id="10462" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="10464" href="plfa.Adequacy.html#10384" class="Bound">N</a><a id="10465" class="Symbol">)</a> <a id="10467" href="plfa.Adequacy.html#10368" class="Bound">γ&#39;</a><a id="10469" class="Symbol">)</a>
<a id="10471" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10335" class="Function">not-AboveFun-𝕍</a> <a id="10486" class="Symbol">{</a><a id="10487" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3978" class="InductiveConstructor">⊥</a><a id="10488" class="Symbol">}</a> <a id="10490" href="plfa.Adequacy.html#10490" class="Bound">af</a> <a id="10493" class="Symbol">=</a> <a id="10495" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Unit.html#174" class="InductiveConstructor">tt</a>
<a id="10498" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10335" class="Function">not-AboveFun-𝕍</a> <a id="10513" class="Symbol">{</a><a id="10514" href="plfa.Adequacy.html#10514" class="Bound">v</a> <a id="10516" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="10518" href="plfa.Adequacy.html#10518" class="Bound">v&#39;</a><a id="10520" class="Symbol">}</a> <a id="10522" href="plfa.Adequacy.html#10522" class="Bound">af</a> <a id="10525" class="Symbol">=</a> <a id="10527" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="10534" class="Symbol">(</a><a id="10535" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="10549" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="10551" href="plfa.Adequacy.html#10514" class="Bound">v</a> <a id="10553" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="10555" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="10557" href="plfa.Adequacy.html#10518" class="Bound">v&#39;</a> <a id="10560" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="10562" href="plfa.Denotational.html#5467" class="Function">Refl⊑</a> <a id="10568" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="10570" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="10572" href="plfa.Adequacy.html#10522" class="Bound">af</a><a id="10574" class="Symbol">)</a>
<a id="10576" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10335" class="Function">not-AboveFun-𝕍</a> <a id="10591" class="Symbol">{</a><a id="10592" href="plfa.Adequacy.html#10592" class="Bound">v₁</a> <a id="10595" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4020" class="InductiveConstructor Operator">⊔</a> <a id="10597" href="plfa.Adequacy.html#10597" class="Bound">v₂</a><a id="10599" class="Symbol">}</a> <a id="10601" href="plfa.Adequacy.html#10601" class="Bound">af</a>
    <a id="10608" class="Keyword">with</a> <a id="10613" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#5647" class="Function">not-AboveFun-⊔-inv</a> <a id="10632" href="plfa.Adequacy.html#10601" class="Bound">af</a>
<a id="10635" class="Symbol">...</a> <a id="10639" class="Symbol">|</a> <a id="10641" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="10643" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10643" class="Bound">af1</a> <a id="10647" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="10649" href="plfa.Adequacy.html#10649" class="Bound">af2</a> <a id="10653" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="10655" class="Symbol">=</a> <a id="10657" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="10659" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a> <a id="10674" href="plfa.Adequacy.html#10643" class="Bound">af1</a> <a id="10678" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="10680" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a> <a id="10695" href="plfa.Adequacy.html#10649" class="Bound">af2</a> <a id="10699" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
The proofs of `𝕍-sub` and `𝔼-sub` are intertwined.

{% raw %}<pre class="Agda"><a id="sub-𝕍"></a><a id="10762" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="10768" class="Symbol">:</a> <a id="10770" class="Symbol">∀{</a><a id="10772" href="plfa.Adequacy.html#10772" class="Bound">c</a> <a id="10774" class="Symbol">:</a> <a id="10776" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a><a id="10780" class="Symbol">}{</a><a id="10782" href="plfa.Adequacy.html#10782" class="Bound">v</a> <a id="10784" href="plfa.Adequacy.html#10784" class="Bound">v&#39;</a><a id="10786" class="Symbol">}</a> <a id="10788" class="Symbol">→</a> <a id="10790" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="10792" href="plfa.Adequacy.html#10782" class="Bound">v</a> <a id="10794" href="plfa.Adequacy.html#10772" class="Bound">c</a> <a id="10796" class="Symbol">→</a> <a id="10798" href="plfa.Adequacy.html#10784" class="Bound">v&#39;</a> <a id="10801" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4313" class="Datatype Operator">⊑</a> <a id="10803" href="plfa.Adequacy.html#10782" class="Bound">v</a> <a id="10805" class="Symbol">→</a> <a id="10807" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="10809" href="plfa.Adequacy.html#10784" class="Bound">v&#39;</a> <a id="10812" href="plfa.Adequacy.html#10772" class="Bound">c</a>
<a id="sub-𝔼"></a><a id="10814" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10814" class="Function">sub-𝔼</a> <a id="10820" class="Symbol">:</a> <a id="10822" class="Symbol">∀{</a><a id="10824" href="plfa.Adequacy.html#10824" class="Bound">c</a> <a id="10826" class="Symbol">:</a> <a id="10828" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a><a id="10832" class="Symbol">}{</a><a id="10834" href="plfa.Adequacy.html#10834" class="Bound">v</a> <a id="10836" href="plfa.Adequacy.html#10836" class="Bound">v&#39;</a><a id="10838" class="Symbol">}</a> <a id="10840" class="Symbol">→</a> <a id="10842" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="10844" href="plfa.Adequacy.html#10834" class="Bound">v</a> <a id="10846" href="plfa.Adequacy.html#10824" class="Bound">c</a> <a id="10848" class="Symbol">→</a> <a id="10850" href="plfa.Adequacy.html#10836" class="Bound">v&#39;</a> <a id="10853" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4313" class="Datatype Operator">⊑</a> <a id="10855" href="plfa.Adequacy.html#10834" class="Bound">v</a> <a id="10857" class="Symbol">→</a> <a id="10859" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="10861" href="plfa.Adequacy.html#10836" class="Bound">v&#39;</a> <a id="10864" href="plfa.Adequacy.html#10824" class="Bound">c</a>
</pre>{% endraw %}
We prove `𝕍-sub` by case analysis on the closure's term, to dispatch the
cases for variables and application. We then proceed by induction on
`v' ⊑ v`. We describe each case below.

{% raw %}<pre class="Agda"><a id="11057" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11063" class="Symbol">{</a><a id="11064" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11069" class="Symbol">(</a><a id="11070" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4064" class="InductiveConstructor Operator">`</a> <a id="11072" href="plfa.Adequacy.html#11072" class="Bound">x</a><a id="11073" class="Symbol">)</a> <a id="11075" href="plfa.Adequacy.html#11075" class="Bound">γ</a><a id="11076" class="Symbol">}</a> <a id="11078" class="Symbol">{</a><a id="11079" href="plfa.Adequacy.html#11079" class="Bound">v</a><a id="11080" class="Symbol">}</a> <a id="11082" class="Symbol">()</a> <a id="11085" href="plfa.Adequacy.html#11085" class="Bound">lt</a>
<a id="11088" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11094" class="Symbol">{</a><a id="11095" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11100" class="Symbol">(</a><a id="11101" href="plfa.Adequacy.html#11101" class="Bound">L</a> <a id="11103" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4176" class="InductiveConstructor Operator">·</a> <a id="11105" href="plfa.Adequacy.html#11105" class="Bound">M</a><a id="11106" class="Symbol">)</a> <a id="11108" href="plfa.Adequacy.html#11108" class="Bound">γ</a><a id="11109" class="Symbol">}</a> <a id="11111" class="Symbol">()</a> <a id="11114" href="plfa.Adequacy.html#11114" class="Bound">lt</a>
<a id="11117" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11123" class="Symbol">{</a><a id="11124" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11129" class="Symbol">(</a><a id="11130" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11132" href="plfa.Adequacy.html#11132" class="Bound">N</a><a id="11133" class="Symbol">)</a> <a id="11135" href="plfa.Adequacy.html#11135" class="Bound">γ</a><a id="11136" class="Symbol">}</a> <a id="11138" href="plfa.Adequacy.html#11138" class="Bound">vc</a> <a id="11141" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4348" class="InductiveConstructor">Bot⊑</a> <a id="11146" class="Symbol">=</a> <a id="11148" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Unit.html#174" class="InductiveConstructor">tt</a>
<a id="11151" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11157" class="Symbol">{</a><a id="11158" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11163" class="Symbol">(</a><a id="11164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11166" href="plfa.Adequacy.html#11166" class="Bound">N</a><a id="11167" class="Symbol">)</a> <a id="11169" href="plfa.Adequacy.html#11169" class="Bound">γ</a><a id="11170" class="Symbol">}</a> <a id="11172" href="plfa.Adequacy.html#11172" class="Bound">vc</a> <a id="11175" class="Symbol">(</a><a id="11176" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4372" class="InductiveConstructor">ConjL⊑</a> <a id="11183" href="plfa.Adequacy.html#11183" class="Bound">lt1</a> <a id="11187" href="plfa.Adequacy.html#11187" class="Bound">lt2</a><a id="11190" class="Symbol">)</a> <a id="11192" class="Symbol">=</a> <a id="11194" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11196" class="Symbol">(</a><a id="11197" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11203" href="plfa.Adequacy.html#11172" class="Bound">vc</a> <a id="11206" href="plfa.Adequacy.html#11183" class="Bound">lt1</a><a id="11209" class="Symbol">)</a> <a id="11211" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11213" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11219" href="plfa.Adequacy.html#11172" class="Bound">vc</a> <a id="11222" href="plfa.Adequacy.html#11187" class="Bound">lt2</a> <a id="11226" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="11228" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11234" class="Symbol">{</a><a id="11235" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11240" class="Symbol">(</a><a id="11241" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11243" href="plfa.Adequacy.html#11243" class="Bound">N</a><a id="11244" class="Symbol">)</a> <a id="11246" href="plfa.Adequacy.html#11246" class="Bound">γ</a><a id="11247" class="Symbol">}</a> <a id="11249" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11251" href="plfa.Adequacy.html#11251" class="Bound">vv1</a> <a id="11255" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11257" href="plfa.Adequacy.html#11257" class="Bound">vv2</a> <a id="11261" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11263" class="Symbol">(</a><a id="11264" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4462" class="InductiveConstructor">ConjR1⊑</a> <a id="11272" href="plfa.Adequacy.html#11272" class="Bound">lt</a><a id="11274" class="Symbol">)</a> <a id="11276" class="Symbol">=</a> <a id="11278" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11284" href="plfa.Adequacy.html#11251" class="Bound">vv1</a> <a id="11288" href="plfa.Adequacy.html#11272" class="Bound">lt</a>
<a id="11291" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11297" class="Symbol">{</a><a id="11298" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11303" class="Symbol">(</a><a id="11304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11306" href="plfa.Adequacy.html#11306" class="Bound">N</a><a id="11307" class="Symbol">)</a> <a id="11309" href="plfa.Adequacy.html#11309" class="Bound">γ</a><a id="11310" class="Symbol">}</a> <a id="11312" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11314" href="plfa.Adequacy.html#11314" class="Bound">vv1</a> <a id="11318" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11320" href="plfa.Adequacy.html#11320" class="Bound">vv2</a> <a id="11324" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11326" class="Symbol">(</a><a id="11327" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4536" class="InductiveConstructor">ConjR2⊑</a> <a id="11335" href="plfa.Adequacy.html#11335" class="Bound">lt</a><a id="11337" class="Symbol">)</a> <a id="11339" class="Symbol">=</a> <a id="11341" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11347" href="plfa.Adequacy.html#11320" class="Bound">vv2</a> <a id="11351" href="plfa.Adequacy.html#11335" class="Bound">lt</a>
<a id="11354" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11360" class="Symbol">{</a><a id="11361" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11366" class="Symbol">(</a><a id="11367" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11369" href="plfa.Adequacy.html#11369" class="Bound">N</a><a id="11370" class="Symbol">)</a> <a id="11372" href="plfa.Adequacy.html#11372" class="Bound">γ</a><a id="11373" class="Symbol">}</a> <a id="11375" href="plfa.Adequacy.html#11375" class="Bound">vc</a> <a id="11378" class="Symbol">(</a><a id="11379" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4610" class="InductiveConstructor">Trans⊑</a><a id="11385" class="Symbol">{</a><a id="11386" class="Argument">v</a> <a id="11388" class="Symbol">=</a> <a id="11390" href="plfa.Adequacy.html#11390" class="Bound">v₂</a><a id="11392" class="Symbol">}</a> <a id="11394" href="plfa.Adequacy.html#11394" class="Bound">lt1</a> <a id="11398" href="plfa.Adequacy.html#11398" class="Bound">lt2</a><a id="11401" class="Symbol">)</a> <a id="11403" class="Symbol">=</a> <a id="11405" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11411" class="Symbol">(</a><a id="11412" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11418" href="plfa.Adequacy.html#11375" class="Bound">vc</a> <a id="11421" href="plfa.Adequacy.html#11398" class="Bound">lt2</a><a id="11424" class="Symbol">)</a> <a id="11426" href="plfa.Adequacy.html#11394" class="Bound">lt1</a>
<a id="11430" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11436" class="Symbol">{</a><a id="11437" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11442" class="Symbol">(</a><a id="11443" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11445" href="plfa.Adequacy.html#11445" class="Bound">N</a><a id="11446" class="Symbol">)</a> <a id="11448" href="plfa.Adequacy.html#11448" class="Bound">γ</a><a id="11449" class="Symbol">}</a> <a id="11451" href="plfa.Adequacy.html#11451" class="Bound">vc</a> <a id="11454" class="Symbol">(</a><a id="11455" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#4684" class="InductiveConstructor">Fun⊑</a> <a id="11460" href="plfa.Adequacy.html#11460" class="Bound">lt1</a> <a id="11464" href="plfa.Adequacy.html#11464" class="Bound">lt2</a><a id="11467" class="Symbol">)</a> <a id="11469" href="plfa.Adequacy.html#11469" class="Bound">ev1</a> <a id="11473" href="plfa.Adequacy.html#11473" class="Bound">sf</a>
    <a id="11480" class="Keyword">with</a> <a id="11485" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11451" class="Bound">vc</a> <a id="11488" class="Symbol">(</a><a id="11489" href="plfa.Adequacy.html#10814" class="Function">sub-𝔼</a> <a id="11495" href="plfa.Adequacy.html#11469" class="Bound">ev1</a> <a id="11499" href="plfa.Adequacy.html#11460" class="Bound">lt1</a><a id="11502" class="Symbol">)</a> <a id="11504" class="Symbol">(</a><a id="11505" href="plfa.Adequacy.html#4240" class="Function">AboveFun-⊑</a> <a id="11516" href="plfa.Adequacy.html#11473" class="Bound">sf</a> <a id="11519" href="plfa.Adequacy.html#11464" class="Bound">lt2</a><a id="11522" class="Symbol">)</a>
<a id="11524" class="Symbol">...</a> <a id="11528" class="Symbol">|</a> <a id="11530" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11532" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11532" class="Bound">c</a> <a id="11534" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11536" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11538" href="plfa.Adequacy.html#11538" class="Bound">Nc</a> <a id="11541" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11543" href="plfa.Adequacy.html#11543" class="Bound">v4</a> <a id="11546" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11548" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11550" class="Symbol">=</a> <a id="11552" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11554" href="plfa.Adequacy.html#11532" class="Bound">c</a> <a id="11556" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11558" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11560" href="plfa.Adequacy.html#11538" class="Bound">Nc</a> <a id="11563" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11565" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="11571" href="plfa.Adequacy.html#11543" class="Bound">v4</a> <a id="11574" class="Bound">lt2</a> <a id="11578" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11580" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="11582" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11588" class="Symbol">{</a><a id="11589" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11594" class="Symbol">(</a><a id="11595" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="11597" href="plfa.Adequacy.html#11597" class="Bound">N</a><a id="11598" class="Symbol">)</a> <a id="11600" href="plfa.Adequacy.html#11600" class="Bound">γ</a><a id="11601" class="Symbol">}</a> <a id="11603" class="Symbol">{</a><a id="11604" href="plfa.Adequacy.html#11604" class="Bound">v</a> <a id="11606" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="11608" href="plfa.Adequacy.html#11608" class="Bound">w</a> <a id="11610" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="11612" href="plfa.Adequacy.html#11604" class="Bound">v</a> <a id="11614" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="11616" href="plfa.Adequacy.html#11616" class="Bound">w&#39;</a><a id="11618" class="Symbol">}</a> <a id="11620" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11622" href="plfa.Adequacy.html#11622" class="Bound">vcw</a> <a id="11626" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11628" href="plfa.Adequacy.html#11628" class="Bound">vcw&#39;</a> <a id="11633" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11635" href="plfa.Denotational.html#4798" class="InductiveConstructor">Dist⊑</a> <a id="11641" href="plfa.Adequacy.html#11641" class="Bound">ev1c</a> <a id="11646" href="plfa.Adequacy.html#11646" class="Bound">sf</a>
    <a id="11653" class="Keyword">with</a> <a id="11658" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="11668" href="plfa.Adequacy.html#11608" class="Bound">w</a> <a id="11670" class="Symbol">|</a> <a id="11672" href="plfa.Adequacy.html#6224" class="Function">AboveFun?</a> <a id="11682" href="plfa.Adequacy.html#11616" class="Bound">w&#39;</a>
<a id="11685" class="Symbol">...</a> <a id="11689" class="Symbol">|</a> <a id="11691" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="11695" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11695" class="Bound">af2</a> <a id="11699" class="Symbol">|</a> <a id="11701" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="11705" href="plfa.Adequacy.html#11705" class="Bound">af3</a>
    <a id="11713" class="Keyword">with</a> <a id="11718" class="Bound">vcw</a> <a id="11722" class="Bound">ev1c</a> <a id="11727" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11695" class="Bound">af2</a> <a id="11731" class="Symbol">|</a> <a id="11733" class="Bound">vcw&#39;</a> <a id="11738" class="Bound">ev1c</a> <a id="11743" href="plfa.Adequacy.html#11705" class="Bound">af3</a>
<a id="11747" class="Symbol">...</a> <a id="11751" class="Symbol">|</a> <a id="11753" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11755" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11760" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11760" class="Bound">L</a> <a id="11762" href="plfa.Adequacy.html#11762" class="Bound">δ</a> <a id="11764" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11766" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11768" href="plfa.Adequacy.html#11768" class="Bound">L⇓c₂</a> <a id="11773" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11775" href="plfa.Adequacy.html#11775" class="Bound">𝕍w</a> <a id="11778" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11780" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="11786" class="Symbol">|</a> <a id="11788" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11790" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11790" class="Bound">c₃</a> <a id="11793" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11795" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11797" href="plfa.Adequacy.html#11797" class="Bound">L⇓c₃</a> <a id="11802" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11804" href="plfa.Adequacy.html#11804" class="Bound">𝕍w&#39;</a> <a id="11808" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11810" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11812" class="Keyword">rewrite</a> <a id="11820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#4555" class="Function">⇓-determ</a> <a id="11829" href="plfa.Adequacy.html#11797" class="Bound">L⇓c₃</a> <a id="11834" href="plfa.Adequacy.html#11768" class="Bound">L⇓c₂</a> <a id="11839" class="Keyword">with</a> <a id="11844" href="plfa.Adequacy.html#9373" class="Function">𝕍→WHNF</a> <a id="11851" href="plfa.Adequacy.html#11775" class="Bound">𝕍w</a>
<a id="11854" class="Symbol">...</a> <a id="11858" class="Symbol">|</a> <a id="11860" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="11863" class="Symbol">=</a>
      <a id="11871" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11873" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="11878" class="Bound">L</a> <a id="11880" class="Bound">δ</a> <a id="11882" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11884" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11886" class="Bound">L⇓c₂</a> <a id="11891" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11893" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11895" class="Bound">𝕍w</a> <a id="11898" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11900" class="Bound">𝕍w&#39;</a> <a id="11904" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11906" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="11908" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="11910" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="11916" class="Symbol">{</a><a id="11917" href="plfa.Adequacy.html#11917" class="Bound">c</a><a id="11918" class="Symbol">}</a> <a id="11920" class="Symbol">{</a><a id="11921" href="plfa.Adequacy.html#11921" class="Bound">v</a> <a id="11923" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="11925" href="plfa.Adequacy.html#11925" class="Bound">w</a> <a id="11927" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="11929" href="plfa.Adequacy.html#11921" class="Bound">v</a> <a id="11931" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="11933" href="plfa.Adequacy.html#11933" class="Bound">w&#39;</a><a id="11935" class="Symbol">}</a> <a id="11937" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="11939" href="plfa.Adequacy.html#11939" class="Bound">vcw</a> <a id="11943" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="11945" href="plfa.Adequacy.html#11945" class="Bound">vcw&#39;</a> <a id="11950" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>  <a id="11953" href="plfa.Denotational.html#4798" class="InductiveConstructor">Dist⊑</a> <a id="11959" href="plfa.Adequacy.html#11959" class="Bound">ev1c</a> <a id="11964" href="plfa.Adequacy.html#11964" class="Bound">sf</a>
    <a id="11971" class="Symbol">|</a> <a id="11973" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="11977" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11977" class="Bound">af2</a> <a id="11981" class="Symbol">|</a> <a id="11983" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="11986" href="plfa.Adequacy.html#11986" class="Bound">naf3</a>
    <a id="11995" class="Keyword">with</a> <a id="12000" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#11939" class="Bound">vcw</a> <a id="12004" href="plfa.Adequacy.html#11959" class="Bound">ev1c</a> <a id="12009" href="plfa.Adequacy.html#11977" class="Bound">af2</a>
<a id="12013" class="Symbol">...</a> <a id="12017" class="Symbol">|</a> <a id="12019" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12021" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="12026" class="Symbol">{</a><a id="12027" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12027" class="Bound">Γ&#39;</a><a id="12029" class="Symbol">}</a> <a id="12031" href="plfa.Adequacy.html#12031" class="Bound">L</a> <a id="12033" href="plfa.Adequacy.html#12033" class="Bound">γ₁</a> <a id="12036" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12038" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12040" href="plfa.Adequacy.html#12040" class="Bound">L⇓c2</a> <a id="12045" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12047" href="plfa.Adequacy.html#12047" class="Bound">𝕍w</a> <a id="12050" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12052" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="12058" class="Keyword">with</a> <a id="12063" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="12070" href="plfa.Adequacy.html#12047" class="Bound">𝕍w</a>
<a id="12073" class="Symbol">...</a> <a id="12077" class="Symbol">|</a> <a id="12079" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="12082" class="Symbol">{</a><a id="12083" class="Argument">N</a> <a id="12085" class="Symbol">=</a> <a id="12087" href="plfa.Adequacy.html#12087" class="Bound">N&#39;</a><a id="12089" class="Symbol">}</a> <a id="12091" class="Symbol">=</a>
      <a id="12099" class="Keyword">let</a> <a id="12103" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12103" class="Bound">𝕍w&#39;</a> <a id="12107" class="Symbol">=</a> <a id="12109" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a><a id="12123" class="Symbol">{</a><a id="12124" class="Bound">w&#39;</a><a id="12126" class="Symbol">}{</a><a id="12128" class="Bound">Γ&#39;</a><a id="12130" class="Symbol">}{</a><a id="12132" class="Bound">γ₁</a><a id="12134" class="Symbol">}{</a><a id="12136" href="plfa.Adequacy.html#12087" class="Bound">N&#39;</a><a id="12138" class="Symbol">}</a> <a id="12140" class="Bound">naf3</a> <a id="12145" class="Keyword">in</a>
      <a id="12154" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12156" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="12161" class="Symbol">(</a><a id="12162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="12164" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12087" class="Bound">N&#39;</a><a id="12166" class="Symbol">)</a> <a id="12168" class="Bound">γ₁</a> <a id="12171" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12173" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12175" class="Bound">L⇓c2</a> <a id="12180" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12182" href="plfa.Adequacy.html#9686" class="Function">𝕍⊔-intro</a> <a id="12191" class="Bound">𝕍w</a> <a id="12194" href="plfa.Adequacy.html#12103" class="Bound">𝕍w&#39;</a> <a id="12198" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12200" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="12202" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="12208" class="Symbol">{</a><a id="12209" href="plfa.Adequacy.html#12209" class="Bound">c</a><a id="12210" class="Symbol">}</a> <a id="12212" class="Symbol">{</a><a id="12213" href="plfa.Adequacy.html#12213" class="Bound">v</a> <a id="12215" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="12217" href="plfa.Adequacy.html#12217" class="Bound">w</a> <a id="12219" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="12221" href="plfa.Adequacy.html#12213" class="Bound">v</a> <a id="12223" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="12225" href="plfa.Adequacy.html#12225" class="Bound">w&#39;</a><a id="12227" class="Symbol">}</a> <a id="12229" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12231" href="plfa.Adequacy.html#12231" class="Bound">vcw</a> <a id="12235" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12237" href="plfa.Adequacy.html#12237" class="Bound">vcw&#39;</a> <a id="12242" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12244" href="plfa.Denotational.html#4798" class="InductiveConstructor">Dist⊑</a> <a id="12250" href="plfa.Adequacy.html#12250" class="Bound">ev1c</a> <a id="12255" href="plfa.Adequacy.html#12255" class="Bound">sf</a>
    <a id="12262" class="Symbol">|</a> <a id="12264" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="12267" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12267" class="Bound">naf2</a> <a id="12272" class="Symbol">|</a> <a id="12274" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="12278" href="plfa.Adequacy.html#12278" class="Bound">af3</a>
    <a id="12286" class="Keyword">with</a> <a id="12291" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12237" class="Bound">vcw&#39;</a> <a id="12296" href="plfa.Adequacy.html#12250" class="Bound">ev1c</a> <a id="12301" href="plfa.Adequacy.html#12278" class="Bound">af3</a>
<a id="12305" class="Symbol">...</a> <a id="12309" class="Symbol">|</a> <a id="12311" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12313" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="12318" class="Symbol">{</a><a id="12319" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12319" class="Bound">Γ&#39;</a><a id="12321" class="Symbol">}</a> <a id="12323" href="plfa.Adequacy.html#12323" class="Bound">L</a> <a id="12325" href="plfa.Adequacy.html#12325" class="Bound">γ₁</a> <a id="12328" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12330" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12332" href="plfa.Adequacy.html#12332" class="Bound">L⇓c3</a> <a id="12337" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12339" href="plfa.Adequacy.html#12339" class="Bound">𝕍w&#39;c</a> <a id="12344" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12346" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="12352" class="Keyword">with</a> <a id="12357" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="12364" href="plfa.Adequacy.html#12339" class="Bound">𝕍w&#39;c</a>
<a id="12369" class="Symbol">...</a> <a id="12373" class="Symbol">|</a> <a id="12375" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="12378" class="Symbol">{</a><a id="12379" class="Argument">N</a> <a id="12381" class="Symbol">=</a> <a id="12383" href="plfa.Adequacy.html#12383" class="Bound">N&#39;</a><a id="12385" class="Symbol">}</a> <a id="12387" class="Symbol">=</a>
      <a id="12395" class="Keyword">let</a> <a id="12399" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12399" class="Bound">𝕍wc</a> <a id="12403" class="Symbol">=</a> <a id="12405" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a><a id="12419" class="Symbol">{</a><a id="12420" class="Bound">w</a><a id="12421" class="Symbol">}{</a><a id="12423" class="Bound">Γ&#39;</a><a id="12425" class="Symbol">}{</a><a id="12427" class="Bound">γ₁</a><a id="12429" class="Symbol">}{</a><a id="12431" href="plfa.Adequacy.html#12383" class="Bound">N&#39;</a><a id="12433" class="Symbol">}</a> <a id="12435" class="Bound">naf2</a> <a id="12440" class="Keyword">in</a>
      <a id="12449" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12451" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="12456" class="Symbol">(</a><a id="12457" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="12459" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12383" class="Bound">N&#39;</a><a id="12461" class="Symbol">)</a> <a id="12463" class="Bound">γ₁</a> <a id="12466" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12468" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12470" class="Bound">L⇓c3</a> <a id="12475" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12477" href="plfa.Adequacy.html#9686" class="Function">𝕍⊔-intro</a> <a id="12486" href="plfa.Adequacy.html#12399" class="Bound">𝕍wc</a> <a id="12490" class="Bound">𝕍w&#39;c</a> <a id="12495" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12497" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="12499" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10762" class="Function">sub-𝕍</a> <a id="12505" class="Symbol">{</a><a id="12506" href="plfa.Adequacy.html#12506" class="Bound">c</a><a id="12507" class="Symbol">}</a> <a id="12509" class="Symbol">{</a><a id="12510" href="plfa.Adequacy.html#12510" class="Bound">v</a> <a id="12512" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3990" class="InductiveConstructor Operator">↦</a> <a id="12514" href="plfa.Adequacy.html#12514" class="Bound">w</a> <a id="12516" href="plfa.Denotational.html#4020" class="InductiveConstructor Operator">⊔</a> <a id="12518" href="plfa.Adequacy.html#12510" class="Bound">v</a> <a id="12520" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="12522" href="plfa.Adequacy.html#12522" class="Bound">w&#39;</a><a id="12524" class="Symbol">}</a> <a id="12526" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12528" href="plfa.Adequacy.html#12528" class="Bound">vcw</a> <a id="12532" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12534" href="plfa.Adequacy.html#12534" class="Bound">vcw&#39;</a> <a id="12539" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12541" href="plfa.Denotational.html#4798" class="InductiveConstructor">Dist⊑</a> <a id="12547" href="plfa.Adequacy.html#12547" class="Bound">ev1c</a> <a id="12552" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12554" href="plfa.Adequacy.html#12554" class="Bound">v&#39;</a> <a id="12557" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12559" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12561" href="plfa.Adequacy.html#12561" class="Bound">w&#39;&#39;</a> <a id="12565" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12567" href="plfa.Adequacy.html#12567" class="Bound">lt</a> <a id="12570" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12572" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="12578" class="Symbol">|</a> <a id="12580" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="12583" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12583" class="Bound">naf2</a> <a id="12588" class="Symbol">|</a> <a id="12590" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="12593" href="plfa.Adequacy.html#12593" class="Bound">naf3</a>
    <a id="12602" class="Keyword">with</a> <a id="12607" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4774" class="Function">AboveFun-⊔</a> <a id="12618" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12620" href="plfa.Adequacy.html#12554" class="Bound">v&#39;</a> <a id="12623" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12625" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="12627" href="plfa.Adequacy.html#12561" class="Bound">w&#39;&#39;</a> <a id="12631" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="12633" href="plfa.Adequacy.html#12567" class="Bound">lt</a> <a id="12636" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="12638" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="12640" class="Symbol">...</a> <a id="12644" class="Symbol">|</a> <a id="12646" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="12651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12651" class="Bound">af2</a> <a id="12655" class="Symbol">=</a> <a id="12657" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="12664" class="Symbol">(</a><a id="12665" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="12679" href="plfa.Adequacy.html#12651" class="Bound">af2</a> <a id="12683" class="Bound">naf2</a><a id="12687" class="Symbol">)</a>
<a id="12689" class="Symbol">...</a> <a id="12693" class="Symbol">|</a> <a id="12695" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="12700" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#12700" class="Bound">af3</a> <a id="12704" class="Symbol">=</a> <a id="12706" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="12713" class="Symbol">(</a><a id="12714" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="12728" href="plfa.Adequacy.html#12700" class="Bound">af3</a> <a id="12732" class="Bound">naf3</a><a id="12736" class="Symbol">)</a>
</pre>{% endraw %}
* Case `Bot⊑`. We immediately have `𝕍 ⊥ (clos (ƛ N) γ)`.

* Case `ConjL⊑`.

        v₁' ⊑ v     v₂' ⊑ v
        -------------------
        (v₁' ⊔ v₂') ⊑ v

  The induction hypotheses gives us `𝕍 v₁' (clos (ƛ N) γ)`
  and `𝕍 v₂' (clos (ƛ N) γ)`, which is all we need for this case.

* Case `ConjR1⊑`.

        v' ⊑ v₁
        -------------
        v' ⊑ (v₁ ⊔ v₂)

  The induction hypothesis gives us `𝕍 v' (clos (ƛ N) γ)`.

* Case `ConjR2⊑`.

        v' ⊑ v₂
        -------------
        v' ⊑ (v₁ ⊔ v₂)

  Again, the induction hypothesis gives us `𝕍 v' (clos (ƛ N) γ)`.

* Case `Trans⊑`.

        v' ⊑ v₂   v₂ ⊑ v
        -----------------
             v' ⊑ v

  The induction hypothesis for `v₂ ⊑ v` gives us
  `𝕍 v₂ (clos (ƛ N) γ)`. We apply the induction hypothesis
  for `v' ⊑ v₂` to conclude that `𝕍 v' (clos (ƛ N) γ)`.

* Case `Dist⊑`. This case  is the most difficult. We have

        𝕍 (v ↦ w) (clos (ƛ N) γ)
        𝕍 (v ↦ w') (clos (ƛ N) γ)

  and need to show that

        𝕍 (v ↦ (w ⊔ w')) (clos (ƛ N) γ)

  Let `c` be an arbtrary closure such that `𝔼 v c`.
  Assume `w ⊔ w'` is greater than a function.
  Unfortunately, this does not mean that both `w` and `w'`
  are above functions. But thanks to the lemma `AboveFun-⊔`,
  we know that at least one of them is greater than a function.

  * Suppose both of them are greater than a function.  Then we have
    `γ ⊢ N ⇓ clos L δ` and `𝕍 w (clos L δ)`.  We also have `γ ⊢ N ⇓ c₃` and
    `𝕍 w' c₃`.  Because the big-step semantics is deterministic, we have
    `c₃ ≡ clos L δ`. Also, from `𝕍 w (clos L δ)` we know that `L ≡ ƛ N'`
    for some `N'`. We conclude that `𝕍 (w ⊔ w') (clos (ƛ N') δ)`.

  * Suppose one of them is greater than a function and the other is
    not: say `AboveFun w` and `¬ AboveFun w'`. Then from
    `𝕍 (v ↦ w) (clos (ƛ N) γ)`
    we have `γ ⊢ N ⇓ clos L γ₁` and `𝕍 w (clos L γ₁)`. From this we have
    `L ≡ ƛ N'` for some `N'`. Meanwhile, from `¬ AboveFun w'` we have
    `𝕍 w' (clos L γ₁)`. We conclude that
    `𝕍 (w ⊔ w') (clos (ƛ N') γ₁)`.


The proof of `sub-𝔼` is direct and explained below.

{% raw %}<pre class="Agda"><a id="14837" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#10814" class="Function">sub-𝔼</a> <a id="14843" class="Symbol">{</a><a id="14844" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="14849" href="plfa.Adequacy.html#14849" class="Bound">M</a> <a id="14851" href="plfa.Adequacy.html#14851" class="Bound">γ</a><a id="14852" class="Symbol">}</a> <a id="14854" class="Symbol">{</a><a id="14855" href="plfa.Adequacy.html#14855" class="Bound">v</a><a id="14856" class="Symbol">}</a> <a id="14858" class="Symbol">{</a><a id="14859" href="plfa.Adequacy.html#14859" class="Bound">v&#39;</a><a id="14861" class="Symbol">}</a> <a id="14863" href="plfa.Adequacy.html#14863" class="Bound">𝔼v</a> <a id="14866" href="plfa.Adequacy.html#14866" class="Bound">v&#39;⊑v</a> <a id="14871" href="plfa.Adequacy.html#14871" class="Bound">fv&#39;</a>
    <a id="14879" class="Keyword">with</a> <a id="14884" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#14863" class="Bound">𝔼v</a> <a id="14887" class="Symbol">(</a><a id="14888" href="plfa.Adequacy.html#4240" class="Function">AboveFun-⊑</a> <a id="14899" href="plfa.Adequacy.html#14871" class="Bound">fv&#39;</a> <a id="14903" href="plfa.Adequacy.html#14866" class="Bound">v&#39;⊑v</a><a id="14907" class="Symbol">)</a>
<a id="14909" class="Symbol">...</a> <a id="14913" class="Symbol">|</a> <a id="14915" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="14917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#14917" class="Bound">c</a> <a id="14919" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="14921" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="14923" href="plfa.Adequacy.html#14923" class="Bound">M⇓c</a> <a id="14927" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="14929" href="plfa.Adequacy.html#14929" class="Bound">𝕍v</a> <a id="14932" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="14934" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="14936" class="Symbol">=</a>
      <a id="14944" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="14946" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#14917" class="Bound">c</a> <a id="14948" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="14950" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="14952" href="plfa.Adequacy.html#14923" class="Bound">M⇓c</a> <a id="14956" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="14958" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="14964" href="plfa.Adequacy.html#14929" class="Bound">𝕍v</a> <a id="14967" class="Bound">v&#39;⊑v</a> <a id="14972" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="14974" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
From `AboveFun v'` and `v' ⊑ v` we have `AboveFun v`.  Then with `𝔼 v c` we
obtain a closure `c` such that `γ ⊢ M ⇓ c` and `𝕍 v c`. We conclude with an
application of `sub-𝕍` with `v' ⊑ v` to show `𝕍 v' c`.


## Programs with function denotation terminate via call-by-name

The main lemma proves that if a term has a denotation that is above a
function, then it terminates via call-by-name. More formally, if
`γ ⊢ M ↓ v` and `𝔾 γ γ'`, then `𝔼 v (clos M γ')`. The proof is by
induction on the derivation of `γ ⊢ M ↓ v` we discuss each case below.

The following lemma, kth-x, is used in the case for the `var` rule.

{% raw %}<pre class="Agda"><a id="kth-x"></a><a id="15601" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15601" class="Function">kth-x</a> <a id="15607" class="Symbol">:</a> <a id="15609" class="Symbol">∀{</a><a id="15611" href="plfa.Adequacy.html#15611" class="Bound">Γ</a><a id="15612" class="Symbol">}{</a><a id="15614" href="plfa.Adequacy.html#15614" class="Bound">γ&#39;</a> <a id="15617" class="Symbol">:</a> <a id="15619" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="15627" href="plfa.Adequacy.html#15611" class="Bound">Γ</a><a id="15628" class="Symbol">}{</a><a id="15630" href="plfa.Adequacy.html#15630" class="Bound">x</a> <a id="15632" class="Symbol">:</a> <a id="15634" href="plfa.Adequacy.html#15611" class="Bound">Γ</a> <a id="15636" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#3259" class="Datatype Operator">∋</a> <a id="15638" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="15639" class="Symbol">}</a>
     <a id="15646" class="Symbol">→</a> <a id="15648" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="15651" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15651" class="Bound">Δ</a> <a id="15653" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="15655" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2906" class="Datatype">Context</a> <a id="15663" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="15665" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="15668" href="plfa.Adequacy.html#15668" class="Bound">δ</a> <a id="15670" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="15672" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="15680" href="plfa.Adequacy.html#15651" class="Bound">Δ</a> <a id="15682" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="15684" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="15687" href="plfa.Adequacy.html#15687" class="Bound">M</a> <a id="15689" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="15691" href="plfa.Adequacy.html#15651" class="Bound">Δ</a> <a id="15693" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="15695" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="15697" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a>
                 <a id="15716" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15614" class="Bound">γ&#39;</a> <a id="15719" href="plfa.Adequacy.html#15630" class="Bound">x</a> <a id="15721" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Equality.html#125" class="Datatype Operator">≡</a> <a id="15723" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="15728" href="plfa.Adequacy.html#15687" class="Bound">M</a> <a id="15730" href="plfa.Adequacy.html#15668" class="Bound">δ</a>
<a id="15732" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15601" class="Function">kth-x</a><a id="15737" class="Symbol">{</a><a id="15738" class="Argument">γ&#39;</a> <a id="15741" class="Symbol">=</a> <a id="15743" href="plfa.Adequacy.html#15743" class="Bound">γ&#39;</a><a id="15745" class="Symbol">}{</a><a id="15747" class="Argument">x</a> <a id="15749" class="Symbol">=</a> <a id="15751" href="plfa.Adequacy.html#15751" class="Bound">x</a><a id="15752" class="Symbol">}</a> <a id="15754" class="Keyword">with</a> <a id="15759" href="plfa.Adequacy.html#15743" class="Bound">γ&#39;</a> <a id="15762" href="plfa.Adequacy.html#15751" class="Bound">x</a>
<a id="15764" class="Symbol">...</a> <a id="15768" class="Symbol">|</a> <a id="15770" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a><a id="15774" class="Symbol">{</a><a id="15775" class="Argument">Γ</a> <a id="15777" class="Symbol">=</a> <a id="15779" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15779" class="Bound">Δ</a><a id="15780" class="Symbol">}</a> <a id="15782" href="plfa.Adequacy.html#15782" class="Bound">M</a> <a id="15784" href="plfa.Adequacy.html#15784" class="Bound">δ</a> <a id="15786" class="Symbol">=</a> <a id="15788" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="15790" href="plfa.Adequacy.html#15779" class="Bound">Δ</a> <a id="15792" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="15794" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="15796" href="plfa.Adequacy.html#15784" class="Bound">δ</a> <a id="15798" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="15800" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="15802" href="plfa.Adequacy.html#15782" class="Bound">M</a> <a id="15804" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="15806" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="15811" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="15813" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="15815" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
{% raw %}<pre class="Agda"><a id="↓→𝔼"></a><a id="15826" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="15830" class="Symbol">:</a> <a id="15832" class="Symbol">∀{</a><a id="15834" href="plfa.Adequacy.html#15834" class="Bound">Γ</a><a id="15835" class="Symbol">}{</a><a id="15837" href="plfa.Adequacy.html#15837" class="Bound">γ</a> <a id="15839" class="Symbol">:</a> <a id="15841" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7096" class="Function">Env</a> <a id="15845" href="plfa.Adequacy.html#15834" class="Bound">Γ</a><a id="15846" class="Symbol">}{</a><a id="15848" href="plfa.Adequacy.html#15848" class="Bound">γ&#39;</a> <a id="15851" class="Symbol">:</a> <a id="15853" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="15861" href="plfa.Adequacy.html#15834" class="Bound">Γ</a><a id="15862" class="Symbol">}{</a><a id="15864" href="plfa.Adequacy.html#15864" class="Bound">M</a> <a id="15866" class="Symbol">:</a> <a id="15868" href="plfa.Adequacy.html#15834" class="Bound">Γ</a> <a id="15870" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4028" class="Datatype Operator">⊢</a> <a id="15872" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="15874" class="Symbol">}{</a><a id="15876" href="plfa.Adequacy.html#15876" class="Bound">v</a><a id="15877" class="Symbol">}</a>
            <a id="15891" class="Symbol">→</a> <a id="15893" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#8788" class="Function">𝔾</a> <a id="15895" href="plfa.Adequacy.html#15837" class="Bound">γ</a> <a id="15897" href="plfa.Adequacy.html#15848" class="Bound">γ&#39;</a> <a id="15900" class="Symbol">→</a> <a id="15902" href="plfa.Adequacy.html#15837" class="Bound">γ</a> <a id="15904" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9270" class="Datatype Operator">⊢</a> <a id="15906" href="plfa.Adequacy.html#15864" class="Bound">M</a> <a id="15908" href="plfa.Denotational.html#9270" class="Datatype Operator">↓</a> <a id="15910" href="plfa.Adequacy.html#15876" class="Bound">v</a> <a id="15912" class="Symbol">→</a> <a id="15914" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="15916" href="plfa.Adequacy.html#15876" class="Bound">v</a> <a id="15918" class="Symbol">(</a><a id="15919" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="15924" href="plfa.Adequacy.html#15864" class="Bound">M</a> <a id="15926" href="plfa.Adequacy.html#15848" class="Bound">γ&#39;</a><a id="15928" class="Symbol">)</a>
<a id="15930" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="15934" class="Symbol">{</a><a id="15935" href="plfa.Adequacy.html#15935" class="Bound">Γ</a><a id="15936" class="Symbol">}</a> <a id="15938" class="Symbol">{</a><a id="15939" href="plfa.Adequacy.html#15939" class="Bound">γ</a><a id="15940" class="Symbol">}</a> <a id="15942" class="Symbol">{</a><a id="15943" href="plfa.Adequacy.html#15943" class="Bound">γ&#39;</a><a id="15945" class="Symbol">}</a> <a id="15947" href="plfa.Adequacy.html#15947" class="Bound">𝔾γγ&#39;</a> <a id="15952" class="Symbol">(</a><a id="15953" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9324" class="InductiveConstructor">var</a><a id="15956" class="Symbol">{</a><a id="15957" class="Argument">x</a> <a id="15959" class="Symbol">=</a> <a id="15961" href="plfa.Adequacy.html#15961" class="Bound">x</a><a id="15962" class="Symbol">})</a> <a id="15965" href="plfa.Adequacy.html#15965" class="Bound">fγx</a>
    <a id="15973" class="Keyword">with</a> <a id="15978" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15601" class="Function">kth-x</a><a id="15983" class="Symbol">{</a><a id="15984" href="plfa.Adequacy.html#15935" class="Bound">Γ</a><a id="15985" class="Symbol">}{</a><a id="15987" href="plfa.Adequacy.html#15943" class="Bound">γ&#39;</a><a id="15989" class="Symbol">}{</a><a id="15991" href="plfa.Adequacy.html#15961" class="Bound">x</a><a id="15992" class="Symbol">}</a> <a id="15994" class="Symbol">|</a> <a id="15996" href="plfa.Adequacy.html#15947" class="Bound">𝔾γγ&#39;</a><a id="16000" class="Symbol">{</a><a id="16001" class="Argument">x</a> <a id="16003" class="Symbol">=</a> <a id="16005" href="plfa.Adequacy.html#15961" class="Bound">x</a><a id="16006" class="Symbol">}</a>
<a id="16008" class="Symbol">...</a> <a id="16012" class="Symbol">|</a> <a id="16014" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16016" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16016" class="Bound">Δ</a> <a id="16018" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16020" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16022" href="plfa.Adequacy.html#16022" class="Bound">δ</a> <a id="16024" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16026" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16028" href="plfa.Adequacy.html#16028" class="Bound">M&#39;</a> <a id="16031" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16033" href="plfa.Adequacy.html#16033" class="Bound">eq</a> <a id="16036" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16038" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16040" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16042" class="Symbol">|</a> <a id="16044" href="plfa.Adequacy.html#16044" class="Bound">𝔾γγ&#39;x</a> <a id="16050" class="Keyword">rewrite</a> <a id="16058" href="plfa.Adequacy.html#16033" class="Bound">eq</a>
    <a id="16065" class="Keyword">with</a> <a id="16070" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16044" class="Bound">𝔾γγ&#39;x</a> <a id="16076" class="Bound">fγx</a>
<a id="16080" class="Symbol">...</a> <a id="16084" class="Symbol">|</a> <a id="16086" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16088" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16088" class="Bound">c</a> <a id="16090" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16092" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16094" href="plfa.Adequacy.html#16094" class="Bound">M&#39;⇓c</a> <a id="16099" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16101" href="plfa.Adequacy.html#16101" class="Bound">𝕍γx</a> <a id="16105" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16107" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16109" class="Symbol">=</a>
      <a id="16117" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16119" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16088" class="Bound">c</a> <a id="16121" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16123" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16125" class="Symbol">(</a><a id="16126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#3199" class="InductiveConstructor">⇓-var</a> <a id="16132" class="Bound">eq</a> <a id="16135" href="plfa.Adequacy.html#16094" class="Bound">M&#39;⇓c</a><a id="16139" class="Symbol">)</a> <a id="16141" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16143" href="plfa.Adequacy.html#16101" class="Bound">𝕍γx</a> <a id="16147" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16149" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="16151" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16155" class="Symbol">{</a><a id="16156" href="plfa.Adequacy.html#16156" class="Bound">Γ</a><a id="16157" class="Symbol">}</a> <a id="16159" class="Symbol">{</a><a id="16160" href="plfa.Adequacy.html#16160" class="Bound">γ</a><a id="16161" class="Symbol">}</a> <a id="16163" class="Symbol">{</a><a id="16164" href="plfa.Adequacy.html#16164" class="Bound">γ&#39;</a><a id="16166" class="Symbol">}</a> <a id="16168" href="plfa.Adequacy.html#16168" class="Bound">𝔾γγ&#39;</a> <a id="16173" class="Symbol">(</a><a id="16174" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9403" class="InductiveConstructor">↦-elim</a><a id="16180" class="Symbol">{</a><a id="16181" class="Argument">L</a> <a id="16183" class="Symbol">=</a> <a id="16185" href="plfa.Adequacy.html#16185" class="Bound">L</a><a id="16186" class="Symbol">}{</a><a id="16188" class="Argument">M</a> <a id="16190" class="Symbol">=</a> <a id="16192" href="plfa.Adequacy.html#16192" class="Bound">M</a><a id="16193" class="Symbol">}{</a><a id="16195" class="Argument">v</a> <a id="16197" class="Symbol">=</a> <a id="16199" href="plfa.Adequacy.html#16199" class="Bound">v₁</a><a id="16201" class="Symbol">}{</a><a id="16203" class="Argument">w</a> <a id="16205" class="Symbol">=</a> <a id="16207" href="plfa.Adequacy.html#16207" class="Bound">v</a><a id="16208" class="Symbol">}</a> <a id="16210" href="plfa.Adequacy.html#16210" class="Bound">d₁</a> <a id="16213" href="plfa.Adequacy.html#16213" class="Bound">d₂</a><a id="16215" class="Symbol">)</a> <a id="16217" href="plfa.Adequacy.html#16217" class="Bound">fv</a>
    <a id="16224" class="Keyword">with</a> <a id="16229" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16233" href="plfa.Adequacy.html#16168" class="Bound">𝔾γγ&#39;</a> <a id="16238" href="plfa.Adequacy.html#16210" class="Bound">d₁</a> <a id="16241" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16243" href="plfa.Adequacy.html#16199" class="Bound">v₁</a> <a id="16246" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16248" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16250" href="plfa.Adequacy.html#16207" class="Bound">v</a> <a id="16252" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16254" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#5467" class="Function">Refl⊑</a> <a id="16260" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16262" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="16264" class="Symbol">...</a> <a id="16268" class="Symbol">|</a> <a id="16270" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16272" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="16277" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16277" class="Bound">L&#39;</a> <a id="16280" href="plfa.Adequacy.html#16280" class="Bound">δ</a> <a id="16282" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16284" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16286" href="plfa.Adequacy.html#16286" class="Bound">L⇓L&#39;</a> <a id="16291" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16293" href="plfa.Adequacy.html#16293" class="Bound">𝕍v₁↦v</a> <a id="16299" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16301" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="16307" class="Keyword">with</a> <a id="16312" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="16319" href="plfa.Adequacy.html#16293" class="Bound">𝕍v₁↦v</a>
<a id="16325" class="Symbol">...</a> <a id="16329" class="Symbol">|</a> <a id="16331" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="16334" class="Symbol">{</a><a id="16335" class="Argument">N</a> <a id="16337" class="Symbol">=</a> <a id="16339" href="plfa.Adequacy.html#16339" class="Bound">N</a><a id="16340" class="Symbol">}</a>
    <a id="16346" class="Keyword">with</a> <a id="16351" class="Bound">𝕍v₁↦v</a> <a id="16357" class="Symbol">{</a><a id="16358" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="16363" class="Bound">M</a> <a id="16365" class="Bound">γ&#39;</a><a id="16367" class="Symbol">}</a> <a id="16369" class="Symbol">(</a><a id="16370" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16374" class="Bound">𝔾γγ&#39;</a> <a id="16379" class="Bound">d₂</a><a id="16381" class="Symbol">)</a> <a id="16383" class="Bound">fv</a>
<a id="16386" class="Symbol">...</a> <a id="16390" class="Symbol">|</a> <a id="16392" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16394" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16394" class="Bound">c&#39;</a> <a id="16397" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16399" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16401" href="plfa.Adequacy.html#16401" class="Bound">N⇓c&#39;</a> <a id="16406" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16408" href="plfa.Adequacy.html#16408" class="Bound">𝕍v</a> <a id="16411" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16413" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16415" class="Symbol">=</a>
    <a id="16421" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16423" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16394" class="Bound">c&#39;</a> <a id="16426" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16428" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16430" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#3441" class="InductiveConstructor">⇓-app</a> <a id="16436" class="Bound">L⇓L&#39;</a> <a id="16441" href="plfa.Adequacy.html#16401" class="Bound">N⇓c&#39;</a> <a id="16446" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16448" href="plfa.Adequacy.html#16408" class="Bound">𝕍v</a> <a id="16451" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16453" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="16455" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16459" class="Symbol">{</a><a id="16460" href="plfa.Adequacy.html#16460" class="Bound">Γ</a><a id="16461" class="Symbol">}</a> <a id="16463" class="Symbol">{</a><a id="16464" href="plfa.Adequacy.html#16464" class="Bound">γ</a><a id="16465" class="Symbol">}</a> <a id="16467" class="Symbol">{</a><a id="16468" href="plfa.Adequacy.html#16468" class="Bound">γ&#39;</a><a id="16470" class="Symbol">}</a> <a id="16472" href="plfa.Adequacy.html#16472" class="Bound">𝔾γγ&#39;</a> <a id="16477" class="Symbol">(</a><a id="16478" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9541" class="InductiveConstructor">↦-intro</a><a id="16485" class="Symbol">{</a><a id="16486" class="Argument">N</a> <a id="16488" class="Symbol">=</a> <a id="16490" href="plfa.Adequacy.html#16490" class="Bound">N</a><a id="16491" class="Symbol">}{</a><a id="16493" class="Argument">v</a> <a id="16495" class="Symbol">=</a> <a id="16497" href="plfa.Adequacy.html#16497" class="Bound">v</a><a id="16498" class="Symbol">}{</a><a id="16500" class="Argument">w</a> <a id="16502" class="Symbol">=</a> <a id="16504" href="plfa.Adequacy.html#16504" class="Bound">w</a><a id="16505" class="Symbol">}</a> <a id="16507" href="plfa.Adequacy.html#16507" class="Bound">d</a><a id="16508" class="Symbol">)</a> <a id="16510" href="plfa.Adequacy.html#16510" class="Bound">fv↦w</a> <a id="16515" class="Symbol">=</a>
    <a id="16521" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16523" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="16528" class="Symbol">(</a><a id="16529" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="16531" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16490" class="Bound">N</a><a id="16532" class="Symbol">)</a> <a id="16534" href="plfa.Adequacy.html#16468" class="Bound">γ&#39;</a> <a id="16537" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16539" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16541" href="plfa.CallByName.html#3362" class="InductiveConstructor">⇓-lam</a> <a id="16547" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16549" href="plfa.Adequacy.html#16565" class="Function">E</a> <a id="16551" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16553" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="16559" class="Keyword">where</a> <a id="16565" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16565" class="Function">E</a> <a id="16567" class="Symbol">:</a> <a id="16569" class="Symbol">{</a><a id="16570" href="plfa.Adequacy.html#16570" class="Bound">c</a> <a id="16572" class="Symbol">:</a> <a id="16574" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a><a id="16578" class="Symbol">}</a> <a id="16580" class="Symbol">→</a> <a id="16582" href="plfa.Adequacy.html#7092" class="Function">𝔼</a> <a id="16584" href="plfa.Adequacy.html#16497" class="Bound">v</a> <a id="16586" href="plfa.Adequacy.html#16570" class="Bound">c</a> <a id="16588" class="Symbol">→</a> <a id="16590" href="plfa.Adequacy.html#4071" class="Function">AboveFun</a> <a id="16599" href="plfa.Adequacy.html#16504" class="Bound">w</a>
            <a id="16613" class="Symbol">→</a> <a id="16615" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="16618" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16618" class="Bound">c&#39;</a> <a id="16621" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="16623" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2588" class="Datatype">Clos</a> <a id="16628" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="16630" class="Symbol">(</a><a id="16631" href="plfa.Adequacy.html#16468" class="Bound">γ&#39;</a> <a id="16634" href="plfa.CallByName.html#2793" class="Function Operator">,&#39;</a> <a id="16637" href="plfa.Adequacy.html#16570" class="Bound">c</a><a id="16638" class="Symbol">)</a> <a id="16640" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="16642" href="plfa.Adequacy.html#16490" class="Bound">N</a> <a id="16644" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="16646" href="plfa.Adequacy.html#16618" class="Bound">c&#39;</a>  <a id="16650" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#1162" class="Function Operator">×</a>  <a id="16653" href="plfa.Adequacy.html#7069" class="Function">𝕍</a> <a id="16655" href="plfa.Adequacy.html#16504" class="Bound">w</a> <a id="16657" href="plfa.Adequacy.html#16618" class="Bound">c&#39;</a>
          <a id="16670" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16565" class="Function">E</a> <a id="16672" class="Symbol">{</a><a id="16673" href="plfa.Adequacy.html#16673" class="Bound">c</a><a id="16674" class="Symbol">}</a> <a id="16676" href="plfa.Adequacy.html#16676" class="Bound">𝔼vc</a> <a id="16680" href="plfa.Adequacy.html#16680" class="Bound">fw</a> <a id="16683" class="Symbol">=</a> <a id="16685" href="plfa.Adequacy.html#15826" class="Function">↓→𝔼</a> <a id="16689" class="Symbol">(λ</a> <a id="16692" class="Symbol">{</a><a id="16693" href="plfa.Adequacy.html#16693" class="Bound">x</a><a id="16694" class="Symbol">}</a> <a id="16696" class="Symbol">→</a> <a id="16698" href="plfa.Adequacy.html#8891" class="Function">𝔾-ext</a><a id="16703" class="Symbol">{</a><a id="16704" href="plfa.Adequacy.html#16460" class="Bound">Γ</a><a id="16705" class="Symbol">}{</a><a id="16707" href="plfa.Adequacy.html#16464" class="Bound">γ</a><a id="16708" class="Symbol">}{</a><a id="16710" href="plfa.Adequacy.html#16468" class="Bound">γ&#39;</a><a id="16712" class="Symbol">}</a> <a id="16714" href="plfa.Adequacy.html#16472" class="Bound">𝔾γγ&#39;</a> <a id="16719" href="plfa.Adequacy.html#16676" class="Bound">𝔼vc</a> <a id="16723" class="Symbol">{</a><a id="16724" href="plfa.Adequacy.html#16693" class="Bound">x</a><a id="16725" class="Symbol">})</a> <a id="16728" href="plfa.Adequacy.html#16507" class="Bound">d</a> <a id="16730" href="plfa.Adequacy.html#16680" class="Bound">fw</a>
<a id="16733" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16737" href="plfa.Adequacy.html#16737" class="Bound">𝔾γγ&#39;</a> <a id="16742" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9665" class="InductiveConstructor">⊥-intro</a> <a id="16750" href="plfa.Adequacy.html#16750" class="Bound">f⊥</a> <a id="16753" class="Symbol">=</a> <a id="16755" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="16762" class="Symbol">(</a><a id="16763" href="plfa.Adequacy.html#4474" class="Function">AboveFun⊥</a> <a id="16773" href="plfa.Adequacy.html#16750" class="Bound">f⊥</a><a id="16775" class="Symbol">)</a>
<a id="16777" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16781" href="plfa.Adequacy.html#16781" class="Bound">𝔾γγ&#39;</a> <a id="16786" class="Symbol">(</a><a id="16787" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9740" class="InductiveConstructor">⊔-intro</a><a id="16794" class="Symbol">{</a><a id="16795" class="Argument">v</a> <a id="16797" class="Symbol">=</a> <a id="16799" href="plfa.Adequacy.html#16799" class="Bound">v₁</a><a id="16801" class="Symbol">}{</a><a id="16803" class="Argument">w</a> <a id="16805" class="Symbol">=</a> <a id="16807" href="plfa.Adequacy.html#16807" class="Bound">v₂</a><a id="16809" class="Symbol">}</a> <a id="16811" href="plfa.Adequacy.html#16811" class="Bound">d₁</a> <a id="16814" href="plfa.Adequacy.html#16814" class="Bound">d₂</a><a id="16816" class="Symbol">)</a> <a id="16818" href="plfa.Adequacy.html#16818" class="Bound">fv12</a>
    <a id="16827" class="Keyword">with</a> <a id="16832" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#6224" class="Function">AboveFun?</a> <a id="16842" href="plfa.Adequacy.html#16799" class="Bound">v₁</a> <a id="16845" class="Symbol">|</a> <a id="16847" href="plfa.Adequacy.html#6224" class="Function">AboveFun?</a> <a id="16857" href="plfa.Adequacy.html#16807" class="Bound">v₂</a>
<a id="16860" class="Symbol">...</a> <a id="16864" class="Symbol">|</a> <a id="16866" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="16870" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16870" class="Bound">fv1</a> <a id="16874" class="Symbol">|</a> <a id="16876" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="16880" href="plfa.Adequacy.html#16880" class="Bound">fv2</a>
    <a id="16888" class="Keyword">with</a> <a id="16893" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="16897" class="Bound">𝔾γγ&#39;</a> <a id="16902" class="Bound">d₁</a> <a id="16905" href="plfa.Adequacy.html#16870" class="Bound">fv1</a> <a id="16909" class="Symbol">|</a> <a id="16911" href="plfa.Adequacy.html#15826" class="Function">↓→𝔼</a> <a id="16915" class="Bound">𝔾γγ&#39;</a> <a id="16920" class="Bound">d₂</a> <a id="16923" href="plfa.Adequacy.html#16880" class="Bound">fv2</a>
<a id="16927" class="Symbol">...</a> <a id="16931" class="Symbol">|</a> <a id="16933" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16935" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16935" class="Bound">c₁</a> <a id="16938" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16940" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16942" href="plfa.Adequacy.html#16942" class="Bound">M⇓c₁</a> <a id="16947" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16949" href="plfa.Adequacy.html#16949" class="Bound">𝕍v₁</a> <a id="16953" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16955" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16957" class="Symbol">|</a> <a id="16959" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16961" href="plfa.Adequacy.html#16961" class="Bound">c₂</a> <a id="16964" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16966" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="16968" href="plfa.Adequacy.html#16968" class="Bound">M⇓c₂</a> <a id="16973" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="16975" href="plfa.Adequacy.html#16975" class="Bound">𝕍v₂</a> <a id="16979" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="16981" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="16987" class="Keyword">rewrite</a> <a id="16995" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#4555" class="Function">⇓-determ</a> <a id="17004" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16968" class="Bound">M⇓c₂</a> <a id="17009" href="plfa.Adequacy.html#16942" class="Bound">M⇓c₁</a> <a id="17014" class="Symbol">=</a>
    <a id="17020" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17022" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#16935" class="Bound">c₁</a> <a id="17025" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17027" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17029" href="plfa.Adequacy.html#16942" class="Bound">M⇓c₁</a> <a id="17034" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17036" href="plfa.Adequacy.html#9686" class="Function">𝕍⊔-intro</a> <a id="17045" href="plfa.Adequacy.html#16949" class="Bound">𝕍v₁</a> <a id="17049" href="plfa.Adequacy.html#16975" class="Bound">𝕍v₂</a> <a id="17053" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17055" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="17057" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17061" href="plfa.Adequacy.html#17061" class="Bound">𝔾γγ&#39;</a> <a id="17066" class="Symbol">(</a><a id="17067" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9740" class="InductiveConstructor">⊔-intro</a><a id="17074" class="Symbol">{</a><a id="17075" class="Argument">v</a> <a id="17077" class="Symbol">=</a> <a id="17079" href="plfa.Adequacy.html#17079" class="Bound">v₁</a><a id="17081" class="Symbol">}{</a><a id="17083" class="Argument">w</a> <a id="17085" class="Symbol">=</a> <a id="17087" href="plfa.Adequacy.html#17087" class="Bound">v₂</a><a id="17089" class="Symbol">}</a> <a id="17091" href="plfa.Adequacy.html#17091" class="Bound">d₁</a> <a id="17094" href="plfa.Adequacy.html#17094" class="Bound">d₂</a><a id="17096" class="Symbol">)</a> <a id="17098" href="plfa.Adequacy.html#17098" class="Bound">fv12</a> <a id="17103" class="Symbol">|</a> <a id="17105" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="17109" href="plfa.Adequacy.html#17109" class="Bound">fv1</a> <a id="17113" class="Symbol">|</a> <a id="17115" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="17118" href="plfa.Adequacy.html#17118" class="Bound">nfv2</a>
    <a id="17127" class="Keyword">with</a> <a id="17132" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17136" href="plfa.Adequacy.html#17061" class="Bound">𝔾γγ&#39;</a> <a id="17141" href="plfa.Adequacy.html#17091" class="Bound">d₁</a> <a id="17144" href="plfa.Adequacy.html#17109" class="Bound">fv1</a>
<a id="17148" class="Symbol">...</a> <a id="17152" class="Symbol">|</a> <a id="17154" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17156" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="17161" class="Symbol">{</a><a id="17162" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17162" class="Bound">Γ&#39;</a><a id="17164" class="Symbol">}</a> <a id="17166" href="plfa.Adequacy.html#17166" class="Bound">M&#39;</a> <a id="17169" href="plfa.Adequacy.html#17169" class="Bound">γ₁</a> <a id="17172" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17174" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17176" href="plfa.Adequacy.html#17176" class="Bound">M⇓c₁</a> <a id="17181" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17183" href="plfa.Adequacy.html#17183" class="Bound">𝕍v₁</a> <a id="17187" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17189" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="17195" class="Keyword">with</a> <a id="17200" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="17207" href="plfa.Adequacy.html#17183" class="Bound">𝕍v₁</a>
<a id="17211" class="Symbol">...</a> <a id="17215" class="Symbol">|</a> <a id="17217" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="17220" class="Symbol">{</a><a id="17221" class="Argument">N</a> <a id="17223" class="Symbol">=</a> <a id="17225" href="plfa.Adequacy.html#17225" class="Bound">N</a><a id="17226" class="Symbol">}</a> <a id="17228" class="Symbol">=</a>
    <a id="17234" class="Keyword">let</a> <a id="17238" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17238" class="Bound">𝕍v₂</a> <a id="17242" class="Symbol">=</a> <a id="17244" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a><a id="17258" class="Symbol">{</a><a id="17259" class="Bound">v₂</a><a id="17261" class="Symbol">}{</a><a id="17263" class="Bound">Γ&#39;</a><a id="17265" class="Symbol">}{</a><a id="17267" class="Bound">γ₁</a><a id="17269" class="Symbol">}{</a><a id="17271" href="plfa.Adequacy.html#17225" class="Bound">N</a><a id="17272" class="Symbol">}</a> <a id="17274" class="Bound">nfv2</a> <a id="17279" class="Keyword">in</a>
    <a id="17286" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17288" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="17293" class="Symbol">(</a><a id="17294" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="17296" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17225" class="Bound">N</a><a id="17297" class="Symbol">)</a> <a id="17299" class="Bound">γ₁</a> <a id="17302" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17304" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17306" class="Bound">M⇓c₁</a> <a id="17311" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17313" href="plfa.Adequacy.html#9686" class="Function">𝕍⊔-intro</a> <a id="17322" class="Bound">𝕍v₁</a> <a id="17326" href="plfa.Adequacy.html#17238" class="Bound">𝕍v₂</a> <a id="17330" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17332" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="17334" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17338" href="plfa.Adequacy.html#17338" class="Bound">𝔾γγ&#39;</a> <a id="17343" class="Symbol">(</a><a id="17344" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9740" class="InductiveConstructor">⊔-intro</a><a id="17351" class="Symbol">{</a><a id="17352" class="Argument">v</a> <a id="17354" class="Symbol">=</a> <a id="17356" href="plfa.Adequacy.html#17356" class="Bound">v₁</a><a id="17358" class="Symbol">}{</a><a id="17360" class="Argument">w</a> <a id="17362" class="Symbol">=</a> <a id="17364" href="plfa.Adequacy.html#17364" class="Bound">v₂</a><a id="17366" class="Symbol">}</a> <a id="17368" href="plfa.Adequacy.html#17368" class="Bound">d₁</a> <a id="17371" href="plfa.Adequacy.html#17371" class="Bound">d₂</a><a id="17373" class="Symbol">)</a> <a id="17375" href="plfa.Adequacy.html#17375" class="Bound">fv12</a> <a id="17380" class="Symbol">|</a> <a id="17382" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="17385" href="plfa.Adequacy.html#17385" class="Bound">nfv1</a>  <a id="17391" class="Symbol">|</a> <a id="17393" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#641" class="InductiveConstructor">yes</a> <a id="17397" href="plfa.Adequacy.html#17397" class="Bound">fv2</a>
    <a id="17405" class="Keyword">with</a> <a id="17410" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17414" href="plfa.Adequacy.html#17338" class="Bound">𝔾γγ&#39;</a> <a id="17419" href="plfa.Adequacy.html#17371" class="Bound">d₂</a> <a id="17422" href="plfa.Adequacy.html#17397" class="Bound">fv2</a>
<a id="17426" class="Symbol">...</a> <a id="17430" class="Symbol">|</a> <a id="17432" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17434" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="17439" class="Symbol">{</a><a id="17440" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17440" class="Bound">Γ&#39;</a><a id="17442" class="Symbol">}</a> <a id="17444" href="plfa.Adequacy.html#17444" class="Bound">M&#39;</a> <a id="17447" href="plfa.Adequacy.html#17447" class="Bound">γ₁</a> <a id="17450" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17452" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17454" href="plfa.Adequacy.html#17454" class="Bound">M&#39;⇓c₂</a> <a id="17460" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17462" href="plfa.Adequacy.html#17462" class="Bound">𝕍2c</a> <a id="17466" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17468" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="17474" class="Keyword">with</a> <a id="17479" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="17486" href="plfa.Adequacy.html#17462" class="Bound">𝕍2c</a>
<a id="17490" class="Symbol">...</a> <a id="17494" class="Symbol">|</a> <a id="17496" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="17499" class="Symbol">{</a><a id="17500" class="Argument">N</a> <a id="17502" class="Symbol">=</a> <a id="17504" href="plfa.Adequacy.html#17504" class="Bound">N</a><a id="17505" class="Symbol">}</a> <a id="17507" class="Symbol">=</a>
    <a id="17513" class="Keyword">let</a> <a id="17517" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17517" class="Bound">𝕍1c</a> <a id="17521" class="Symbol">=</a> <a id="17523" href="plfa.Adequacy.html#10335" class="Function">not-AboveFun-𝕍</a><a id="17537" class="Symbol">{</a><a id="17538" class="Bound">v₁</a><a id="17540" class="Symbol">}{</a><a id="17542" class="Bound">Γ&#39;</a><a id="17544" class="Symbol">}{</a><a id="17546" class="Bound">γ₁</a><a id="17548" class="Symbol">}{</a><a id="17550" href="plfa.Adequacy.html#17504" class="Bound">N</a><a id="17551" class="Symbol">}</a> <a id="17553" class="Bound">nfv1</a> <a id="17558" class="Keyword">in</a>
    <a id="17565" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17567" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="17572" class="Symbol">(</a><a id="17573" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="17575" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17504" class="Bound">N</a><a id="17576" class="Symbol">)</a> <a id="17578" class="Bound">γ₁</a> <a id="17581" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17583" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17585" class="Bound">M&#39;⇓c₂</a> <a id="17591" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17593" href="plfa.Adequacy.html#9686" class="Function">𝕍⊔-intro</a> <a id="17602" href="plfa.Adequacy.html#17517" class="Bound">𝕍1c</a> <a id="17606" class="Bound">𝕍2c</a> <a id="17610" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17612" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="17614" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17618" href="plfa.Adequacy.html#17618" class="Bound">𝔾γγ&#39;</a> <a id="17623" class="Symbol">(</a><a id="17624" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9740" class="InductiveConstructor">⊔-intro</a> <a id="17632" href="plfa.Adequacy.html#17632" class="Bound">d₁</a> <a id="17635" href="plfa.Adequacy.html#17635" class="Bound">d₂</a><a id="17637" class="Symbol">)</a> <a id="17639" href="plfa.Adequacy.html#17639" class="Bound">fv12</a> <a id="17644" class="Symbol">|</a> <a id="17646" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="17649" href="plfa.Adequacy.html#17649" class="Bound">nfv1</a>  <a id="17655" class="Symbol">|</a> <a id="17657" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.html#668" class="InductiveConstructor">no</a> <a id="17660" href="plfa.Adequacy.html#17660" class="Bound">nfv2</a>
    <a id="17669" class="Keyword">with</a> <a id="17674" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#4774" class="Function">AboveFun-⊔</a> <a id="17685" href="plfa.Adequacy.html#17639" class="Bound">fv12</a>
<a id="17690" class="Symbol">...</a> <a id="17694" class="Symbol">|</a> <a id="17696" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#662" class="InductiveConstructor">inj₁</a> <a id="17701" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17701" class="Bound">fv1</a> <a id="17705" class="Symbol">=</a> <a id="17707" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="17714" class="Symbol">(</a><a id="17715" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="17729" href="plfa.Adequacy.html#17701" class="Bound">fv1</a> <a id="17733" class="Bound">nfv1</a><a id="17737" class="Symbol">)</a>
<a id="17739" class="Symbol">...</a> <a id="17743" class="Symbol">|</a> <a id="17745" href="https://agda.github.io/agda-stdlib/v1.1/Data.Sum.Base.html#687" class="InductiveConstructor">inj₂</a> <a id="17750" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17750" class="Bound">fv2</a> <a id="17754" class="Symbol">=</a> <a id="17756" href="https://agda.github.io/agda-stdlib/v1.1/Data.Empty.html#294" class="Function">⊥-elim</a> <a id="17763" class="Symbol">(</a><a id="17764" href="https://agda.github.io/agda-stdlib/v1.1/Relation.Nullary.Negation.html#809" class="Function">contradiction</a> <a id="17778" href="plfa.Adequacy.html#17750" class="Bound">fv2</a> <a id="17782" class="Bound">nfv2</a><a id="17786" class="Symbol">)</a>
<a id="17788" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17792" class="Symbol">{</a><a id="17793" href="plfa.Adequacy.html#17793" class="Bound">Γ</a><a id="17794" class="Symbol">}</a> <a id="17796" class="Symbol">{</a><a id="17797" href="plfa.Adequacy.html#17797" class="Bound">γ</a><a id="17798" class="Symbol">}</a> <a id="17800" class="Symbol">{</a><a id="17801" href="plfa.Adequacy.html#17801" class="Bound">γ&#39;</a><a id="17803" class="Symbol">}</a> <a id="17805" class="Symbol">{</a><a id="17806" href="plfa.Adequacy.html#17806" class="Bound">M</a><a id="17807" class="Symbol">}</a> <a id="17809" class="Symbol">{</a><a id="17810" href="plfa.Adequacy.html#17810" class="Bound">v&#39;</a><a id="17812" class="Symbol">}</a> <a id="17814" href="plfa.Adequacy.html#17814" class="Bound">𝔾γγ&#39;</a> <a id="17819" class="Symbol">(</a><a id="17820" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#9871" class="InductiveConstructor">sub</a><a id="17823" class="Symbol">{</a><a id="17824" class="Argument">v</a> <a id="17826" class="Symbol">=</a> <a id="17828" href="plfa.Adequacy.html#17828" class="Bound">v</a><a id="17829" class="Symbol">}</a> <a id="17831" href="plfa.Adequacy.html#17831" class="Bound">d</a> <a id="17833" href="plfa.Adequacy.html#17833" class="Bound">v&#39;⊑v</a><a id="17837" class="Symbol">)</a> <a id="17839" href="plfa.Adequacy.html#17839" class="Bound">fv&#39;</a>
    <a id="17847" class="Keyword">with</a> <a id="17852" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="17856" class="Symbol">{</a><a id="17857" href="plfa.Adequacy.html#17793" class="Bound">Γ</a><a id="17858" class="Symbol">}</a> <a id="17860" class="Symbol">{</a><a id="17861" href="plfa.Adequacy.html#17797" class="Bound">γ</a><a id="17862" class="Symbol">}</a> <a id="17864" class="Symbol">{</a><a id="17865" href="plfa.Adequacy.html#17801" class="Bound">γ&#39;</a><a id="17867" class="Symbol">}</a> <a id="17869" class="Symbol">{</a><a id="17870" href="plfa.Adequacy.html#17806" class="Bound">M</a><a id="17871" class="Symbol">}</a> <a id="17873" href="plfa.Adequacy.html#17814" class="Bound">𝔾γγ&#39;</a> <a id="17878" href="plfa.Adequacy.html#17831" class="Bound">d</a> <a id="17880" class="Symbol">(</a><a id="17881" href="plfa.Adequacy.html#4240" class="Function">AboveFun-⊑</a> <a id="17892" href="plfa.Adequacy.html#17839" class="Bound">fv&#39;</a> <a id="17896" href="plfa.Adequacy.html#17833" class="Bound">v&#39;⊑v</a><a id="17900" class="Symbol">)</a>
<a id="17902" class="Symbol">...</a> <a id="17906" class="Symbol">|</a> <a id="17908" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17910" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17910" class="Bound">c</a> <a id="17912" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17914" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17916" href="plfa.Adequacy.html#17916" class="Bound">M⇓c</a> <a id="17920" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17922" href="plfa.Adequacy.html#17922" class="Bound">𝕍v</a> <a id="17925" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17927" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17929" class="Symbol">=</a>
      <a id="17937" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17939" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#17910" class="Bound">c</a> <a id="17941" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17943" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="17945" href="plfa.Adequacy.html#17916" class="Bound">M⇓c</a> <a id="17949" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17951" href="plfa.Adequacy.html#10762" class="Function">sub-𝕍</a> <a id="17957" href="plfa.Adequacy.html#17922" class="Bound">𝕍v</a> <a id="17960" class="Bound">v&#39;⊑v</a> <a id="17965" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="17967" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}
* Case `var`. Looking up `x` in `γ'` yields some closure, `clos M' δ`,
  and from `𝔾 γ γ'` we have `𝔼 (γ x) (clos M' δ)`. With the premise
  `AboveFun (γ x)`, we obtain a closure `c` such that `δ ⊢ M' ⇓ c`
  and `𝕍 (γ x) c`. To conclude `γ' ⊢ x ⇓ c` via `⇓-var`, we
  need `γ' x ≡ clos M' δ`, which is obvious, but it requires some
  Agda shananigans via the `kth-x` lemma to get our hands on it.

* Case `↦-elim`. We have `γ ⊢ L · M ↓ v`.
  The induction hypothesis for `γ ⊢ L ↓ v₁ ↦ v`
  gives us `γ' ⊢ L ⇓ clos L' δ` and `𝕍 v (clos L' δ)`.
  Of course, `L' ≡ ƛ N` for some `N`.
  By the induction hypothesis for `γ ⊢ M ↓ v₁`,
  we have `𝔼 v₁ (clos M γ')`.
  Together with the premise `AboveFun v` and `𝕍 v (clos L' δ)`,
  we obtain a closure `c'` such that `δ ⊢ N ⇓ c'` and `𝕍 v c'`.
  We conclude that `γ' ⊢ L · M ⇓ c'` by rule `⇓-app`.

* Case `↦-intro`. We have `γ ⊢ ƛ N ↓ v ↦ w`.
  We immediately have `γ' ⊢ ƛ M ⇓ clos (ƛ M) γ'` by rule `⇓-lam`.
  But we also need to prove `𝕍 (v ↦ w) (clos (ƛ N) γ')`.
  Let `c` by an arbitrary closure such that `𝔼 v c`.
  Suppose `v'` is greater than a function value.
  We need to show that `γ' , c ⊢ N ⇓ c'` and `𝕍 v' c'` for some `c'`.
  We prove this by the induction hypothesis for `γ , v ⊢ N ↓ v'`
  but we must first show that `𝔾 (γ , v) (γ' , c)`. We prove
  that by the lemma `𝔾-ext`, using facts `𝔾 γ γ'` and `𝔼 v c`.

* Case `⊥-intro`. We have the premise `AboveFun ⊥`, but that's impossible.

* Case `⊔-intro`. We have `γ ⊢ M ↓ (v₁ ⊔ v₂)` and `AboveFun (v₁ ⊔ v₂)`
  and need to show `γ' ⊢ M ↓ c` and `𝕍 (v₁ ⊔ v₂) c` for some `c`.
  Again, by `AboveFun-⊔`, at least one of `v₁` or `v₂` is greater than
  a function.

  * Suppose both `v₁` and `v₂` are greater than a function value.
    By the induction hypotheses for `γ ⊢ M ↓ v₁` and `γ ⊢ M ↓ v₂`
    we have `γ' ⊢ M ⇓ c₁`, `𝕍 v₁ c₁`, `γ' ⊢ M ⇓ c₂`, and `𝕍 v₂ c₂`
    for some `c₁` and `c₂`. Because `⇓` is deterministic, we have `c₂ ≡ c₁`.
    Then by `𝕍⊔-intro` we conclude that `𝕍 (v₁ ⊔ v₂) c₁`.

  * Without loss of generality, suppose `v₁` is greater than a function
    value but `v₂` is not.  By the induction hypotheses for `γ ⊢ M ↓ v₁`,
    and using `𝕍→WHNF`, we have `γ' ⊢ M ⇓ clos (ƛ N) γ₁`
    and `𝕍 v₁ (clos (ƛ N) γ₁)`.
    Then because `v₂` is not greater than a function, we also have
    `𝕍 v₂ (clos (ƛ N) γ₁)`. We conclude that `𝕍 (v₁ ⊔ v₂) (clos (ƛ N) γ₁)`.

* Case `sub`. We have `γ ⊢ M ↓ v`, `v' ⊑ v`, and `AboveFun v'`.
  We need to show that `γ' ⊢ M ⇓ c` and `𝕍 v' c` for some `c`.
  We have `AboveFun v` by `AboveFun-⊑`,
  so the induction hypothesis for `γ ⊢ M ↓ v` gives us a closure `c`
  such that `γ' ⊢ M ⇓ c` and `𝕍 v c`. We conclude that `𝕍 v' c` by `sub-𝕍`.


## Proof of denotational adequacy

The adequacy property is a corollary of the main lemma.
We have `∅ ⊢ ƛ N ↓ ⊥ ↦ ⊥`, so `ℰ M ≃ ℰ (ƛ N)`
gives us `∅ ⊢ M ↓ ⊥ ↦ ⊥`. Then the main lemma gives us
`∅ ⊢ M ⇓ clos (ƛ N′) γ` for some `N′` and `γ`.

{% raw %}<pre class="Agda"><a id="adequacy"></a><a id="20917" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#20917" class="Function">adequacy</a> <a id="20926" class="Symbol">:</a> <a id="20928" class="Symbol">∀{</a><a id="20930" href="plfa.Adequacy.html#20930" class="Bound">M</a> <a id="20932" class="Symbol">:</a> <a id="20934" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2928" class="InductiveConstructor">∅</a> <a id="20936" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="20938" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="20939" class="Symbol">}{</a><a id="20941" href="plfa.Adequacy.html#20941" class="Bound">N</a> <a id="20943" class="Symbol">:</a> <a id="20945" href="plfa.Untyped.html#2928" class="InductiveConstructor">∅</a> <a id="20947" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="20949" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="20951" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="20953" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="20954" class="Symbol">}</a>  <a id="20957" class="Symbol">→</a>  <a id="20960" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#17211" class="Function">ℰ</a> <a id="20962" href="plfa.Adequacy.html#20930" class="Bound">M</a> <a id="20964" href="plfa.Denotational.html#17393" class="Function Operator">≃</a> <a id="20966" href="plfa.Denotational.html#17211" class="Function">ℰ</a> <a id="20968" class="Symbol">(</a><a id="20969" href="plfa.Untyped.html#4116" class="InductiveConstructor Operator">ƛ</a> <a id="20971" href="plfa.Adequacy.html#20941" class="Bound">N</a><a id="20972" class="Symbol">)</a>
         <a id="20983" class="Symbol">→</a>  <a id="20986" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="20989" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#20989" class="Bound">Γ</a> <a id="20991" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="20993" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2906" class="Datatype">Context</a> <a id="21001" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="21003" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="21006" href="plfa.Adequacy.html#21006" class="Bound">N′</a> <a id="21009" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="21011" class="Symbol">(</a><a id="21012" href="plfa.Adequacy.html#20989" class="Bound">Γ</a> <a id="21014" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="21016" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="21018" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="21020" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="21021" class="Symbol">)</a> <a id="21023" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="21025" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="21028" href="plfa.Adequacy.html#21028" class="Bound">γ</a> <a id="21030" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="21032" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="21040" href="plfa.Adequacy.html#20989" class="Bound">Γ</a> <a id="21042" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a>
            <a id="21056" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2771" class="Function">∅&#39;</a> <a id="21059" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="21061" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#20930" class="Bound">M</a> <a id="21063" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="21065" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a> <a id="21070" class="Symbol">(</a><a id="21071" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="21073" href="plfa.Adequacy.html#21006" class="Bound">N′</a><a id="21075" class="Symbol">)</a> <a id="21077" href="plfa.Adequacy.html#21028" class="Bound">γ</a>
<a id="21079" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#20917" class="Function">adequacy</a><a id="21087" class="Symbol">{</a><a id="21088" href="plfa.Adequacy.html#21088" class="Bound">M</a><a id="21089" class="Symbol">}{</a><a id="21091" href="plfa.Adequacy.html#21091" class="Bound">N</a><a id="21092" class="Symbol">}</a> <a id="21094" href="plfa.Adequacy.html#21094" class="Bound">eq</a>
    <a id="21101" class="Keyword">with</a> <a id="21106" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#15826" class="Function">↓→𝔼</a> <a id="21110" href="plfa.Adequacy.html#8867" class="Function">𝔾-∅</a> <a id="21114" class="Symbol">((</a><a id="21116" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="21122" class="Symbol">(</a><a id="21123" href="plfa.Adequacy.html#21094" class="Bound">eq</a> <a id="21126" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#7220" class="Function">`∅</a> <a id="21129" class="Symbol">(</a><a id="21130" href="plfa.Denotational.html#3978" class="InductiveConstructor">⊥</a> <a id="21132" href="plfa.Denotational.html#3990" class="InductiveConstructor Operator">↦</a> <a id="21134" href="plfa.Denotational.html#3978" class="InductiveConstructor">⊥</a><a id="21135" class="Symbol">)))</a> <a id="21139" class="Symbol">(</a><a id="21140" href="plfa.Denotational.html#9541" class="InductiveConstructor">↦-intro</a> <a id="21148" href="plfa.Denotational.html#9665" class="InductiveConstructor">⊥-intro</a><a id="21155" class="Symbol">))</a>
                 <a id="21175" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21177" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#3978" class="InductiveConstructor">⊥</a> <a id="21179" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21181" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21183" href="plfa.Denotational.html#3978" class="InductiveConstructor">⊥</a> <a id="21185" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21187" href="plfa.Denotational.html#5467" class="Function">Refl⊑</a> <a id="21193" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="21195" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
<a id="21197" class="Symbol">...</a> <a id="21201" class="Symbol">|</a> <a id="21203" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21205" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2607" class="InductiveConstructor">clos</a> <a id="21210" class="Symbol">{</a><a id="21211" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21211" class="Bound">Γ</a><a id="21212" class="Symbol">}</a> <a id="21214" href="plfa.Adequacy.html#21214" class="Bound">M′</a> <a id="21217" href="plfa.Adequacy.html#21217" class="Bound">γ</a> <a id="21219" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21221" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21223" href="plfa.Adequacy.html#21223" class="Bound">M⇓c</a> <a id="21227" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21229" href="plfa.Adequacy.html#21229" class="Bound">Vc</a> <a id="21232" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="21234" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
    <a id="21240" class="Keyword">with</a> <a id="21245" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9373" class="Function">𝕍→WHNF</a> <a id="21252" href="plfa.Adequacy.html#21229" class="Bound">Vc</a>
<a id="21255" class="Symbol">...</a> <a id="21259" class="Symbol">|</a> <a id="21261" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#9266" class="InductiveConstructor Operator">ƛ_</a> <a id="21264" class="Symbol">{</a><a id="21265" class="Argument">N</a> <a id="21267" class="Symbol">=</a> <a id="21269" href="plfa.Adequacy.html#21269" class="Bound">N′</a><a id="21271" class="Symbol">}</a> <a id="21273" class="Symbol">=</a>
    <a id="21279" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21281" class="Bound">Γ</a> <a id="21283" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21285" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21287" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21269" class="Bound">N′</a> <a id="21290" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21292" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="21294" class="Bound">γ</a> <a id="21296" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="21298" class="Bound">M⇓c</a> <a id="21302" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>  <a id="21305" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a> <a id="21307" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}

## Call-by-name is equivalent to beta reduction

As promised, we return to the question of whether call-by-name
evaluation is equivalent to beta reduction. In the chapter CallByName
we established the forward direction: that if call-by-name produces a
result, then the program beta reduces to a lambda abstraction.  We now
prove the backward direction of the if-and-only-if, leveraging our
results about the denotational semantics.

{% raw %}<pre class="Agda"><a id="reduce→cbn"></a><a id="21752" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21752" class="Function">reduce→cbn</a> <a id="21763" class="Symbol">:</a> <a id="21765" class="Symbol">∀</a> <a id="21767" class="Symbol">{</a><a id="21768" href="plfa.Adequacy.html#21768" class="Bound">M</a> <a id="21770" class="Symbol">:</a> <a id="21772" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2928" class="InductiveConstructor">∅</a> <a id="21774" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="21776" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="21777" class="Symbol">}</a> <a id="21779" class="Symbol">{</a><a id="21780" href="plfa.Adequacy.html#21780" class="Bound">N</a> <a id="21782" class="Symbol">:</a> <a id="21784" href="plfa.Untyped.html#2928" class="InductiveConstructor">∅</a> <a id="21786" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="21788" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="21790" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="21792" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="21793" class="Symbol">}</a>
           <a id="21806" class="Symbol">→</a> <a id="21808" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21768" class="Bound">M</a> <a id="21810" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/LambdaReduction.md %}{% raw %}#837" class="Datatype Operator">—↠</a> <a id="21813" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="21815" href="plfa.Adequacy.html#21780" class="Bound">N</a>
           <a id="21828" class="Symbol">→</a> <a id="21830" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="21833" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21833" class="Bound">Δ</a> <a id="21835" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="21837" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2906" class="Datatype">Context</a> <a id="21845" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="21847" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="21850" href="plfa.Adequacy.html#21850" class="Bound">N′</a> <a id="21853" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="21855" href="plfa.Adequacy.html#21833" class="Bound">Δ</a> <a id="21857" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="21859" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="21861" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="21863" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="21865" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="21867" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="21870" href="plfa.Adequacy.html#21870" class="Bound">δ</a> <a id="21872" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="21874" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="21882" href="plfa.Adequacy.html#21833" class="Bound">Δ</a> <a id="21884" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a>
             <a id="21899" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2771" class="Function">∅&#39;</a> <a id="21902" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="21904" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21768" class="Bound">M</a> <a id="21906" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="21908" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a> <a id="21913" class="Symbol">(</a><a id="21914" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="21916" href="plfa.Adequacy.html#21850" class="Bound">N′</a><a id="21918" class="Symbol">)</a> <a id="21920" href="plfa.Adequacy.html#21870" class="Bound">δ</a>
<a id="21922" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#21752" class="Function">reduce→cbn</a> <a id="21933" href="plfa.Adequacy.html#21933" class="Bound">M—↠ƛN</a> <a id="21939" class="Symbol">=</a> <a id="21941" href="plfa.Adequacy.html#20917" class="Function">adequacy</a> <a id="21950" class="Symbol">(</a><a id="21951" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Soundness.md %}{% raw %}#23421" class="Function">soundness</a> <a id="21961" href="plfa.Adequacy.html#21933" class="Bound">M—↠ƛN</a><a id="21966" class="Symbol">)</a>
</pre>{% endraw %}
Suppose `M —↠ ƛ N`. Soundness of the denotational semantics gives us
`ℰ M ≃ ℰ (ƛ N)`. Then by adequacy we conclude that
`∅' ⊢ M ⇓ clos (ƛ N′) δ` for some `N′` and `δ`.

Putting the two directions of the if-and-only-if together, we
establish that call-by-name evaluation is equivalent to beta reduction
in the following sense.

{% raw %}<pre class="Agda"><a id="cbn↔reduce"></a><a id="22304" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22304" class="Function">cbn↔reduce</a> <a id="22315" class="Symbol">:</a> <a id="22317" class="Symbol">∀</a> <a id="22319" class="Symbol">{</a><a id="22320" href="plfa.Adequacy.html#22320" class="Bound">M</a> <a id="22322" class="Symbol">:</a> <a id="22324" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2928" class="InductiveConstructor">∅</a> <a id="22326" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="22328" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a><a id="22329" class="Symbol">}</a>
           <a id="22342" class="Symbol">→</a> <a id="22344" class="Symbol">(</a><a id="22345" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="22348" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22348" class="Bound">N</a> <a id="22350" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="22352" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2928" class="InductiveConstructor">∅</a> <a id="22354" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="22356" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="22358" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="22360" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="22362" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="22364" class="Symbol">(</a><a id="22365" href="plfa.Adequacy.html#22320" class="Bound">M</a> <a id="22367" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/LambdaReduction.md %}{% raw %}#837" class="Datatype Operator">—↠</a> <a id="22370" href="plfa.Untyped.html#4116" class="InductiveConstructor Operator">ƛ</a> <a id="22372" href="plfa.Adequacy.html#22348" class="Bound">N</a><a id="22373" class="Symbol">))</a>
             <a id="22389" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Denotational.md %}{% raw %}#16732" class="Function Operator">iff</a>
             <a id="22406" class="Symbol">(</a><a id="22407" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="22410" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22410" class="Bound">Δ</a> <a id="22412" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="22414" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#2906" class="Datatype">Context</a> <a id="22422" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="22424" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="22427" href="plfa.Adequacy.html#22427" class="Bound">N′</a> <a id="22430" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="22432" href="plfa.Adequacy.html#22410" class="Bound">Δ</a> <a id="22434" href="plfa.Untyped.html#2944" class="InductiveConstructor Operator">,</a> <a id="22436" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="22438" href="plfa.Untyped.html#4028" class="Datatype Operator">⊢</a> <a id="22440" href="plfa.Untyped.html#2652" class="InductiveConstructor">★</a> <a id="22442" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a> <a id="22444" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">Σ[</a> <a id="22447" href="plfa.Adequacy.html#22447" class="Bound">δ</a> <a id="22449" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">∈</a> <a id="22451" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2558" class="Function">ClosEnv</a> <a id="22459" href="plfa.Adequacy.html#22410" class="Bound">Δ</a> <a id="22461" href="https://agda.github.io/agda-stdlib/v1.1/Data.Product.html#911" class="Function">]</a>
               <a id="22478" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#2771" class="Function">∅&#39;</a> <a id="22481" href="plfa.CallByName.html#3142" class="Datatype Operator">⊢</a> <a id="22483" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22320" class="Bound">M</a> <a id="22485" href="plfa.CallByName.html#3142" class="Datatype Operator">⇓</a> <a id="22487" href="plfa.CallByName.html#2607" class="InductiveConstructor">clos</a> <a id="22492" class="Symbol">(</a><a id="22493" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Untyped.md %}{% raw %}#4116" class="InductiveConstructor Operator">ƛ</a> <a id="22495" href="plfa.Adequacy.html#22427" class="Bound">N′</a><a id="22497" class="Symbol">)</a> <a id="22499" href="plfa.Adequacy.html#22447" class="Bound">δ</a><a id="22500" class="Symbol">)</a>
<a id="22502" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22304" class="Function">cbn↔reduce</a> <a id="22513" class="Symbol">{</a><a id="22514" href="plfa.Adequacy.html#22514" class="Bound">M</a><a id="22515" class="Symbol">}</a> <a id="22517" class="Symbol">=</a> <a id="22519" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟨</a> <a id="22521" class="Symbol">(λ</a> <a id="22524" href="plfa.Adequacy.html#22524" class="Bound">x</a> <a id="22526" class="Symbol">→</a> <a id="22528" href="plfa.Adequacy.html#21752" class="Function">reduce→cbn</a> <a id="22539" class="Symbol">(</a><a id="22540" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="22546" href="plfa.Adequacy.html#22524" class="Bound">x</a><a id="22547" class="Symbol">))</a> <a id="22550" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a>
                   <a id="22571" class="Symbol">(λ</a> <a id="22574" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/Adequacy.md %}{% raw %}#22574" class="Bound">x</a> <a id="22576" class="Symbol">→</a> <a id="22578" href="{% endraw %}{{ site.baseurl }}{% link out/plfa/CallByName.md %}{% raw %}#11028" class="Function">cbn→reduce</a> <a id="22589" class="Symbol">(</a><a id="22590" href="https://agda.github.io/agda-stdlib/v1.1/Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="22596" class="Symbol">(</a><a id="22597" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="22603" class="Symbol">(</a><a id="22604" href="Agda.Builtin.Sigma.html#237" class="Field">proj₂</a> <a id="22610" href="plfa.Adequacy.html#22574" class="Bound">x</a><a id="22611" class="Symbol">))))</a> <a id="22616" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">⟩</a>
</pre>{% endraw %}

## Unicode

This chapter uses the following unicode:

    𝔼  U+1D53C  MATHEMATICAL DOUBLE-STRUCK CAPITAL E (\bE)
    𝔾  U+1D53E  MATHEMATICAL DOUBLE-STRUCK CAPITAL G (\bG)
    𝕍  U+1D53E  MATHEMATICAL DOUBLE-STRUCK CAPITAL V (\bV)
